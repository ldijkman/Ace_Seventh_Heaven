<!--
       Heaven or Hell, That is the Question

i think the minimapeditor is now more like  (could be made) plugin like, in the editor
    // test maybe better for plugin alike code
    editor.container.insertAdjacentHTML("beforeend", "<div id=\"minimapeditor\" class=\"minimapeditor\" onmouseover=\'ace.edit(\"minimapeditor\").focus();\'></div>")

    there is no vertical scrollbar in visualstudio minimap
    but i think the vscroll in minimap makes the minimap better 
      i like to scroll minimap without editor scrolling
         not in vs monaco

???
   in visualstudio monaco 
      a search selection is not cleared by a mouse click on editor
   i need that
???

need a raspberry pi5 to replace my raspberry pi400
  need more speed
    Bought a IT-Gigant Lenovo i5 ThinkCentre 120SSD 80Euro 
      removed Windows, installed Linux Mint
        https://www.google.com/search?q=ITGigant+Lenovo+i5+ThinkCentre

Get Ace back in the Race
   Fund This Project   
       Http://paypal.me/LDijkman

-->

<!DOCTYPE html>
<html lang="en">
<script>
var warning = true;
window.onbeforeunload = function() {
  if (warning) {
    return "You have made changes on this page that you have not yet confirmed. If you navigate away from this page you will lose your unsaved changes";
    }
}
</script>

  <link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/ldijkman/randomnerd_esp32_wifi_manager/main/Electra.jpg">

<title>The AfterWorld, Editor with AI </title>

<head>
	<meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.6">

<style type="text/css" media="screen">
body {
  color-scheme: dark;
  background-color: black;
  overscroll-behavior: none;
  overflow: hidden;
  width: 100%;
  height: 100%;
}

#editor {
  width: 80%;
  height: 100%;
  display: flex;
}


.ace_editor .ace_marker-layer .ace_selection {
  //background-color: orange;
  border:2px solid orange;
}

.ace_editor .ace_marker-layer .ace_selected-word {
  //background-color: orange;
  border:2px solid yellow;
}

#minimapeditor {                   /*minimap*/
  position: absolute;
  right: 32px;
  top: 0%;
  width: 125px;
  height: 100%;
  background-color: ;
  border: 1px solid gray;
  z-index:1000;
}

#minimapeditor .ace_scrollbar-h {   /*do not show horizontal scrollbar on minmap*/
  display: none;
}

.ace_scrollbar-h {               /*editor horizontal scrollbar*/
  width: 100%;
}

.ace_scroll-v {                   /*custom vertical scrollbar guide rail*/       
  z-index: 1000;
  position: absolute;
  top: 0;
  right: 1px;
  bottom: 10px;
  width: 30px;
  border: 1px solid gray;
}

.ace_thumb-v {
  background: lightgray;         /*draghandle custom vertical scrollbar*/
}

.ace_map-row {                  /*custom vertical scrollbar active cursor line*/
  z-index: 1001;
  position: absolute;
  pointer-events: none;
  top: 0;
  right: 1px;
  width: 30px;
  height: 2px;
  background: greenyellow;
}

.ace_map-item {                  /*custom vertical scrollbar list item blue line*/
  z-index: 1002;
  position: absolute;
  pointer-events: none;
  right: 6px;
  width: 20px;
  height: 1px;
  background: cornflowerblue;
}

.ace_link_marker {                  /*red underline when over url link in editore*/
  position: absolute;
  border-bottom: 5px solid red;
  opacity: 50%;
}

.ace_search.right {                      /*find search popup box*/
  position: absolute;
  border-radius: 8px 8px 8px 8px;
  border-right: 0 none;
  left: 5%;
  top: 2%;
  font-size: 15px; /*otherwise it scales with fontsize of editor inherit*/
  right: auto;
  cursor: move;
  color-scheme: dark;
  background-color: #444444;
  color: lightgray;
}

.ace_button {              /* change color search*/
  color: lightgray;
}

a:-webkit-any-link {              /* change color link in topmenu*/
  color: lightgray;
  cursor: pointer;
  text-decoration: underline;
}

.container {                      /*contains it all*/
  position: absolute;
  display: flex;
  top: 5%;
  width: 100%;
  height: 95%;
  border: 1px solid #cbd5e0;
}

.resizer {                    /*drag handle between left and right window*/
  background-color: #dba9b3;
  width: 5px;
  cursor: ew-resize;
}
.container__right {
  flex: 1;                    /* Take the remaining width */
  width: 100%;
  height: 100%;
  display: flex;
}

#preview {
  flex: 1;                    /* Take the remaining width */
  height: 100%;
  display: flex;
}

#preview iframe {             /*html preview iframe*/
  width: 100%;
  height: 100%;
  border: none;
  overflow: hidden;
}

#status {                     /*not visible*/
  position: absolute;
  padding: 0px 0;
  height: 55px;
  width: 100%;
 
}
.ace_scrollbar-v {      /*make minimap vertical scrollbar a bit less wide*/
  width: 6px;
}

.yellowborder {                            /*for dark themes*/
  position: absolute;
  bbackground-color: rgba(255,0,255,0.10) ;
  border: 2px solid yellow;
  z-index:100;
  display:block;
}

.purpleborder {                           /*for bright themes*/
  position: absolute;
  bbackground-color: rgba(255,0,255,0.10) ;
  border: 2px solid purple;
  z-index:100;
}

  .ace_editor .ace_marker-layer .ace_bracket {  /*better visible {} pair*/
  
   background: rgba(255,255,0,0.25);
   border: 1px solid greenyellow;
   //padding-left: 2px;padding-right: 2px;padding-top: 2px;padding-bottom: 2px;
   //border-collapse: 10px;
    
  }
  .ace_indent-guide{
  color:red; 
  background-color:red;
  width:2px;
  }

.brightness {
    background-color: white;
    display: inline-block;
   
}
.brightness img:hover {
    opacity: .5;
}

.ace_search_field {
    border-radius: 3px 0 0 3px;
    background-color: #eee;
    color: black;
    border: 1px solid #cbcbcb;
    border-right: 0 none;
    outline: 0;
    padding: 0;
    font-size: inherit;
    margin: 0;
    line-height: inherit;
    padding: 0 6px;
    min-width: 17em;
    vertical-align: top;
    min-height: 1.8em;
    box-sizing: content-box;
}

.ace_searchbtn.prev, .ace_searchbtn.next {
    padding: 0px 0.7em;
    background: #CCCCCC;
    color:black;
}
.ace_searchbtn:last-child {
    border-radius: 0 3px 3px 0;
    border-right: 1px solid #cbcbcb;
    background: #B0B0B0;
}
.ace_searchbtn.prev:after {
    content: "";
    border: solid 2px #888;
    width: 0.5em;
    height: 0.5em;
    border-width: 2px 0 0 2px;
    display: inline-block;
    transform: rotate(45deg);  /*rotate <*/
    color: black;
}
 .ace_searchbtn.next:after {
    content: "";
    border: solid 2px #888;
    width: 0.5em;
    height: 0.5em;
    border-width: 2px 0 0 2px;
    display: inline-block;
    transform: rotate(-135deg);  /*rotate >*/
    color: black;
}
#gearbutton{
  font-size:16px;
}
.errormarker {
  position: absolute;
  background-color: rgba(255,0,0,0.1);
  border: 1px solid red;
  z-index:3;
}
.warningmarker {
  position: absolute;
  background-color: rgba(255,255,0,0.75);
  border: 1px solid yellow;
  z-index:3;
}

/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/
.dropdown {
  position: relative;
  display: inline-block;
    noposition: absolute;
  nodisplay: block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #666;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 11000;
  padding:5px;
  margin:-5px;
}

.dropdown-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
}

.dropdown-content a:hover {background-color: #ddd;}

.dropdown:hover .dropdown-content {display: block;}

.dropdown:hover .dropbtn {background-color: #3e8e41;}


/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/
.dropdowntwo {
  position: relative;
  display: inline-block;
}

.dropdowntwo-content {
  display: none;
  position: absolute;
  background-color: #666;
  min-width: 160px;
  top:-20px;
  left:100px;
  border: 1px solid greenyellow;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 11000;
  padding:5px;  
  overflow-x: hidden;
  overflow-y: auto;
  margin:-5px;
}

.dropdowntwo-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;

}

.dropdowntwo-content a:hover {background-color: #ddd;}

.dropdowntwo:hover .dropdowntwo-content {display: block;}

.dropdowntwo:hover .dropbtntwo {background-color: #3e8e41;}




.select {
  position: absolute;
  top:12px;
  width:120px;
  z-index:100000;
}
.select :hover{
   width:250px;  
}
.select option{
   width:250px;  
}
.select optgroup{
   width:250px;
 }

}

</style>


 <style>
      .cont_ai_ner {
        position: fixed;
        display:float;
        min-height:90px;
        min-width:350px;
        background-color: #f1f1f1;
        border: 1px solid gray;
        left: 100px;
        top:  140px;
        width: 500px;
        height: 500px;
        border-radius: 5px;
        z-index:100000;
      }
      .cont_ai_ner,
      .AfterWorld,
      .Heaven,
      .Hell {
        padding: 0px; 
      }
      .AfterWorld {
        position:absolute;
        margin-top: 0;
        min-height:15px;
        nomax-height: 508px;
        width:100%;
        overflow: auto;
        top:25px;
        bottom:20px;
       
      }
      .Heaven {
        position:absolute;
        height: 25px;
        width:99%;
        border-bottom: 1px solid #eee;
        background-color: lightblue;
        -webkit-border-top-left-radius: 5px;
        -webkit-border-top-right-radius: 5px;
        -moz-border-radius-topleft: 5px;
        -moz-border-radius-topright: 5px;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
        margin:2px;
        cursor:move;
        border: 1px solid gray;
      }
      .Hell {
        position:absolute;
        height:20px;
        width:99.5%;
        background-color: lightgray;
        border-top: 1px solid #ddd;
        -webkit-border-bottom-left-radius: 5px;
        -webkit-border-bottom-right-radius: 5px;
        -moz-border-radius-bottomleft: 5px;
        -moz-border-radius-bottomright: 5px;
        border-bottom-left-radius: 5px;
        border-bottom-right-radius: 5px; 
        bottom:1px;
         border: 1px solid gray;
      }

#promptInput{ 
  background:#EDFFEC;
color:green;

}

#buttons {
  position: fixed;
  top: 30px;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: purple;
  padding: 8px;
}
    </style>

    <style>
    body{
      
      //background:lightgray;
     // margin:50px;

      
    }
    /* CSS for the spinner */
  #spinner {
    border: 4px solid #f3f3f3; /* Light gray border */
    border-top: 4px solid orange; /* Orange color for spinning */
    border-radius: 50%; /* Circular shape */
    width: 22px; /* Make the spinner smaller by adjusting width */
    height: 22px; /* Make the spinner smaller by adjusting height */
    animation: spin 2s linear infinite; /* Spin animation */
    display: none; /* Initially hidden */
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  </style>  

  <style>
.ddropbtn {
  position: relative;
}

.ddropdown {
  position: absolute;
  display: block;
}

.ddropdown-content {
  display: none;
  position: absolute;
  background-color: #f1f1f1;
  width: 200px;
  mmin-height: 260px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
  margin:-3px;  /*otherwise there is a gap, loose mouse focus */
}

.ddropdown-content a {
  color: black;
  nopadding: 12px 16px;
  text-decoration: none;
  display: block;
}

.ddropdown-content a:hover {background-color: #ddd;}

.ddropdown:hover .dropdown-content {display: block;}

.ddropdown:hover .dropbtn {background-color: #3e8e41;}

.autoExpand {
  height: auto;
  min-height: 40px; /* You can adjust this to your preferred minimum height */
}


.floating-div {
position: absolute;
right:10px;
top:50%; /* position in the middle of the parent div */
transform: translateY(-50%);
nobackground-color: #fff;
noborder:1px solid #ccc;
padding:2px;
z-index:2500000;
nopacity:.6;
background:#FF000000;
}

.up-button,
.down-button {
display: block;
margin:0px;
padding:2px;
width:100%;
z-index:2500000;
noopacity:.7;
noborder:#FF0000ee;
color:#FF0000EE;
background:#FF000000;
}
</style>

  <style>
code {
color: #00ff00;
background-color: #000;
padding:5px;
display: block;
}
</style>

<!--
   <style>
   /*   console   */
   
   /*
   body {
      color-scheme: dark;
      background-color: black;
      overscroll-behavior: none;
      overflow: hidden;
      width: 100%;
      height: 100%;
      color: lightgray;
    }
*/
    /* Make the whole thing smaller with transform: scale(70%) */
    #console-log-div {
      min-height: 55px;
      max-height: 200px;
      width: 600px;
      top: 200px;
      left:100px;
      margin: 1px;
      padding: 1px 0 0 0;
      font-family: "Input Mono", monospace;
      font-weight: 400;
      font-size: 0.8em;
      line-height: 1em;
      color: rgba(0, 0, 0, .61);
      box-shadow: inset 0 0 2px rgba(0, 0, 0, .1);
      background-color: #ebebeb;
      overflow: auto;
      overscroll-behavior-y: auto;
      transform: scale(100%);
      z-index:50000;

    }

    #console-log-div #legend,
    #console-log-div .log-row,
    #console-log-div td {
      padding: 1px 0 8px 0;
      text-indent: 1px;
       z-index:50000;
    }

    #console-log-div #legend {
      padding-bottom: 12px;
      font-size: 1.2em;
      cursor: move;
       z-index:50000;
    }

    #console-log-div .log-row:nth-child(odd) {
      background: rgba(0, 0, 0, .1);
       z-index:50000;
    }

    #console-log-div thead {
      background: rgba(0, 0, 0, .2);
    }

    </style>
    -->
<link rel="stylesheet" href="https://ldijkman.github.io/Ace_Seventh_Heaven/console.css">

  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
      

<script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.9/beautify.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.9/beautify-css.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.9/beautify-html.js"></script>

<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">


 <script type="text/javascript" src="https://cdn.statuspage.io/se-v2.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<!--
  <script src="https://cdn.jsdelivr.net/npm/marked/lib/marked.umd.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/marked-highlight/lib/index.umd.js"></script>

   <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism.min.css" rel="stylesheet" />
-->

<style>
.ui-tooltip {
	padding: 8px;
	position: absolute;
	z-index: 100000;
	max-width: 300px;
  pointer-events:none;
  box-shadow:none;
}

</style>
<script>
   
   //https://phuoc.ng/collection/html-dom/create-resizable-split-views/
document.addEventListener('DOMContentLoaded', function () {
    // Query the element
    const resizer = document.getElementById('dragMe');
    const leftSide = resizer.previousElementSibling;
    const rightSide = resizer.nextElementSibling;

    // The current position of mouse
    let x = 0;
    let y = 0;
    let leftWidth = 0;

    // Handle the mousedown event
    // that's triggered when user drags the resizer
    const mouseDownHandler = function (e) {
        // Get the current mouse position
        x = e.clientX;
        y = e.clientY;
        leftWidth = leftSide.getBoundingClientRect().width;

        // Attach the listeners to document
        document.addEventListener('mousemove', mouseMoveHandler);
        document.addEventListener('mouseup', mouseUpHandler);
    };

    const mouseMoveHandler = function (e) {
        // How far the mouse has been moved
        const dx = e.clientX - x;
        const dy = e.clientY - y;

        const newLeftWidth = ((leftWidth + dx) * 100) / resizer.parentNode.getBoundingClientRect().width;
        leftSide.style.width = newLeftWidth + '%';

        resizer.style.cursor = 'col-resize';
        document.body.style.cursor = 'col-resize';

        leftSide.style.userSelect = 'none';
        leftSide.style.pointerEvents = 'none';

        rightSide.style.userSelect = 'none';
        rightSide.style.pointerEvents = 'none';
    };

    const mouseUpHandler = function () {
        resizer.style.removeProperty('cursor');
        document.body.style.removeProperty('cursor');

        leftSide.style.removeProperty('user-select');
        leftSide.style.removeProperty('pointer-events');

        rightSide.style.removeProperty('user-select');
        rightSide.style.removeProperty('pointer-events');

        // Remove the handlers of mousemove and mouseup
        document.removeEventListener('mousemove', mouseMoveHandler);
        document.removeEventListener('mouseup', mouseUpHandler);
    };

    // Attach the handler
    resizer.addEventListener('mousedown', mouseDownHandler);
});
   
   
var backup="";
 var tooltipval=1;
   
  </script>
<!--<script type="text/javascript" src="scrollbar.js"></script>
 <link rel="stylesheet" href="https://ldijkman.github.io/randomnerd_esp32_wifi_manager/mrs/Ace_color/ext-scrollbar.css" />
-->
<script type="text/javascript" src="https://ldijkman.github.io/randomnerd_esp32_wifi_manager/mrs/Ace_color/ext-scrollbar.js"></script>



</head>

<body>
<script src="https://ldijkman.github.io/Ace_Seventh_Heaven/console.js"></script>
 <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->
 <div class="dropdown">
  <button class="dropbtn" onmouseover="this.focus()">File</button>
  <div class="dropdown-content">
    <input type="button" class="dropbt" onclick="document.getElementById('openbton').click()" value="Open File" onmouseover="this.focus()">
                         <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->
              <div class="dropdowntwo">
              <button class="dropbtntwo" title="oes not always work CORS policy" onmouseover="this.focus()" >Open File From URL </button>
                <div class="dropdowntwo-content" style="left:140px;top:-15px;width:300px;padding:20px;">
                       <input type="text" class="dropbttwo" id="urlinput" onclick='' style="width:300px;" title="does not always work CORS policy" value="//run.plnkr.co/plunks/TMDzQALQgACruCYz/" onmouseover="this.focus()" list="nope_url"><br>
                         <datalist id="url">
                           <option value="https://run.plnkr.co/plunks/TMDzQALQgACruCYz/">
                            <option value="https://run.plnkr.co/plunks/5m0Aa8vqmntFDekn/">
                            <option value="https://raw.githubusercontent.com/ldijkman/Ace_Seventh_Heaven/main/docs/Hell.html">
                            <option value="empty">
                          </datalist>
                    
                    <center><br>
                      <input type="button" class="dropbttwo" onclick="download_to_textbox(urlinput.value);Update_HTML_Preview();" style="border: 1px solid white;" title="does not always work CORS policy" value="open from URL" onmouseover="this.focus()">
                      </center>
                  </div>
              </div>
              <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->
     <input type="button" class="dropbt" onclick='save()' style="" onmouseover="this.focus()" value="Save by DownLoad"  onmouseover="this.focus()">
    <input type="button" class="savebutton dropbt" type="button" style="" title="if Framed DownLoad&#013;if FullScreen maybe Save to Disk" onmouseover="this.focus()" value="Save to Disk?">
 </div>
</div>
<!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->




<script src="https://ldijkman.github.io/Ace_Seventh_Heaven/console.js"></script>
 <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->
 <div class="dropdown">
  <button class="dropbtn" onmouseover="this.focus()">New</button>
  <div class="dropdown-content">
 <input type="button" class="savebutton dropbt" type="button" style="" 
 title="New blank file&#013;" 
 onmouseover="this.focus()" value="New"
 onclick='filename.value="New.html"; editor.setValue("", -1);'>
 </div>
</div>
<!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->









<input
        type="file"
        id="openbton"
        onchange="openCode(this.files)"
        value="Open PC"
        style="background-color:lightgray;color:black;font-weight: bold;"
        title="For PC load a file from Disk"
        hidden
      />
<input class="text" id="filename" value="7th_Heaven.html" size="15" title="FileName" onmouseover="this.focus()">

  <button onclick='ace.edit("editor").setFontSize(parseInt(ace.edit("editor").getFontSize())-1);document.getElementById("fontSize").value=editor.getFontSize()' title="FontSize -" onmouseover="this.focus()">-</button>
  <input type="number" id="fontSize" style="width: 2.2em;" value='20' oninput='ace.edit("editor").setFontSize(parseInt(this.value))'  title="FontSize" onmouseover="this.focus()">
  <button onclick='ace.edit("editor").setFontSize(parseInt(ace.edit("editor").getFontSize())+1);document.getElementById("fontSize").value=editor.getFontSize()' title="FontSize +" onmouseover="this.focus()">+</button>

  <select id="ace-mode" style="width: 75px;" title="select editor file type mode" onmouseover="this.focus()">
    <option value="css">CSS</option>
    <option value="html" selected>HTML</option>
    <option value="javascript">JavaScript</option>
    <option value="json">JSON</option>
    <option value="text">Text</option>
    <option value="c_cpp">C and C++</option>
  </select>

<select id="ace-theme"  class="select" size="1" style="width: 100px;" title="select a theme colorscheme" onMouseOver='this.focus();this.size="43";this.style.width="175px";this.style.top="+35px";' onMouseout='this.size="1";this.style.width="";this.style.top="";' >
<optgroup class="optgroup" label="Bright" id="sel">
  <option value="ace/theme/chrome">Chrome</option>
  <option value="ace/theme/clouds">Clouds</option>
  <option value="ace/theme/crimson_editor">Crimson Editor</option>
  <option value="ace/theme/dawn">Dawn</option>
  <option value="ace/theme/dreamweaver">Dreamweaver</option>
  <option value="ace/theme/eclipse">Eclipse</option>
  <option value="ace/theme/github">GitHub</option>
  <option value="ace/theme/iplastic">IPlastic</option>
  <option value="ace/theme/solarized_light">Solarized Light</option>
  <option value="ace/theme/textmate">TextMate</option>
  <option value="ace/theme/tomorrow">Tomorrow</option>
  <option value="ace/theme/xcode">XCode</option>
  <option value="ace/theme/kuroir">Kuroir</option>
  <option value="ace/theme/katzenmilch">KatzenMilch</option>
  <option value="ace/theme/sqlserver">SQL Server</option>
</optgroup>
<optgroup label="Dark" style="min-width: 250px;">
  <option value="ace/theme/ambiance">Ambiance</option>
  <option value="ace/theme/chaos">Chaos</option>
  <option value="ace/theme/clouds_midnight">Clouds Midnight</option>
  <option value="ace/theme/dracula">Dracula</option>
  <option value="ace/theme/cobalt">Cobalt</option>
  <option value="ace/theme/gruvbox">Gruvbox</option>
  <option value="ace/theme/gob">Green on Black</option>
  <option value="ace/theme/idle_fingers">idle Fingers</option>
  <option value="ace/theme/kr_theme">krTheme</option>
  <option value="ace/theme/merbivore">Merbivore</option>
  <option value="ace/theme/merbivore_soft">Merbivore Soft</option>
  <option value="ace/theme/mono_industrial">Mono Industrial</option>
  <option value="ace/theme/monokai">Monokai</option>
  <option value="ace/theme/nord_dark">Nord Dark</option>
  <option value="ace/theme/one_dark">One Dark</option>
  <option value="ace/theme/pastel_on_dark">Pastel on dark</option>
  <option value="ace/theme/solarized_dark">Solarized Dark</option>
  <option value="ace/theme/terminal">Terminal</option>
  <option value="ace/theme/tomorrow_night">Tomorrow Night</option>
  <option value="ace/theme/tomorrow_night_blue">Tomorrow Night Blue</option>
  <option value="ace/theme/tomorrow_night_bright">Tomorrow Night Bright</option>
  <option value="ace/theme/tomorrow_night_eighties">Tomorrow Night 80s</option>
  <option value="ace/theme/twilight">Twilight</option>
  <option value="ace/theme/vibrant_ink" selected>Vibrant Ink</option>
  <option value="ace/theme/github_dark">GitHub Dark</option>
</optgroup>
</select>
    &nbsp;  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   &nbsp;&nbsp;&nbsp;&nbsp;
<button onclick='ace.edit("minimapeditor").setFontSize(parseFloat(ace.edit("minimapeditor").getFontSize())-.1);document.getElementById("minimapfontSize").value=minimapeditor.getFontSize()' title="MiniMap FontSize -" onmouseover="this.focus()">-</button>
<input type="number" id="minimapfontSize" style="width: 2.2em;" value='3' step="0.1" oninput='ace.edit("minimapeditor").setFontSize(parseFloat(this.value))'  title="MiniMap FontSize" onmouseover="this.focus()">
<button onclick='ace.edit("minimapeditor").setFontSize(parseFloat(ace.edit("minimapeditor").getFontSize())+.1);document.getElementById("minimapfontSize").value=minimapeditor.getFontSize()' title="MiniMap FontSize +" onmouseover="this.focus()">+</button>


 <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->
 <div class="dropdown">
  <button class="dropbtn" onmouseover="this.focus()" title="override theme colors">BGC</button>
  <div class="dropdown-content">
override theme colors<br><br>

    <!-- Color Picker for Editor Background -->
<label for="editorBgColorPicker">Editor background color:</label>
<input type="color" id="editorBgColorPicker" value="editorStyles.backgroundColor"><br>

<!-- Color Picker for Gutter Background -->
<label for="gutterBgColorPicker">Gutter background color:</label>
<input type="color" id="gutterBgColorPicker" value="editorStyles.backgroundColor"><br>

<!-- Color Picker for Gutter Foreground -->
<label for="gutterFgColorPicker">Gutter foreground color:</label>
<input type="color" id="gutterFgColorPicker" value="#FFFFFF"> 
<!-- Replace #FFFFFF with your default gutter foreground color -->
<script>
    // Get the color picker elements
    var editorBgColorPicker = document.getElementById('editorBgColorPicker');
    var gutterBgColorPicker = document.getElementById('gutterBgColorPicker');

    // Editor Background Color Picker event listener
    editorBgColorPicker.addEventListener('input', function() {
         editor.container.style.background = this.value;
    }, false);

    // Gutter Background Color Picker event listener
    gutterBgColorPicker.addEventListener('input', function() {
        document.querySelector('.ace_gutter').style.background = this.value;
    }, false);

    // Get the gutter foreground color picker element
var gutterFgColorPicker = document.getElementById('gutterFgColorPicker');

// Gutter Foreground Color Picker event listener
gutterFgColorPicker.addEventListener('input', function() {
    var gutterCells = document.querySelectorAll('.ace_gutter-cell');
    for (var i = 0; i < gutterCells.length; i++) {
        gutterCells[i].style.color = this.value;
    }
}, false);
</script>
   <!--
    <input type="button" class="dropbt" onclick="showhideminimap()" id="minimapbutton" value="Hide MiniMap" onmouseover="this.focus()">
    <input type="button" class="dropbt" onclick="showhidepreview()" id="previewbutton" value="Hide Preview" onmouseover="this.focus()">
    <input type="button" class="dropbt" id="fullscreenbutton" onclick="toggleFullScreen()" title="Toggle FullScreen" style="" onmouseover="this.focus()" value="FullScreen">
    <input type="button" class="dropbt" id="linenmbrsbutton" onclick="togglelinenumbers()" title="Toggle the Gutter LineNumbers" style="" onmouseover="this.focus()" value="Hide LineNumbers">
    <input type="button" class="dropbt" id="invisiblesbutton" onclick="toggleinvisibles()" title="Toggle Invisibles" style="" onmouseover="this.focus()" value="Hide Invisibles">
    <input type="button" onclick="toggleconsole()" title="Toggle Editor console" style="" onmouseover="this.focus()" value="Toggle Editor Console">
    <input type="button"   onclick="toggleVisibility('cont_ai_ner')" title="GPT OpenAI API" style="color:greenyellow;" onmouseover="this.focus()" value="Toggle A.I. Chat">
 -->
  </div>
</div>
<!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->







<!--
///////////////////////////
// menu button Edit
/////////////////////////// 
-->
  <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->
 <div class="dropdown">
  <button class="dropbtn" onmouseover="this.focus()">Edit</button>
  <div class="dropdown-content" style="width:200px;padding:5px;">
   <input type="button" class="dropbt" id="" onclick="" title="Warning Maybe no UnDo on next buttons &#013; use ctrl+a, ctrl+c &#013; to save a copy to yuor clipboard"  style="color:yellow" onmouseover="this.focus()" value="Warning Maybe no UnDo">
   <br>
              <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->
              <div class="dropdowntwo">
              <button class="dropbtntwo" title="Test sub menu 1?" onmouseover="this.focus()" >make a backup copy </button>
                <div class="dropdowntwo-content" style="top:5px;">
                    <input type="button" class="dropbttwo" onclick="backup=editor.getValue();" style="" title="copy text" value="save content" onmouseover="this.focus()"><br>
                    <input type="button" class="dropbttwo" onclick='if(backup!=""){editor.setValue(backup);}' style="" title="restore backup" value="restore content"  onmouseover="this.focus()"><br>
                </div>
              </div>
              <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->

    <input type="button" class="dropbt" onclick="convertspacestotab();" id="" value="Convert Spaces to Tabs" onmouseover="this.focus()" 
    title="Convert Spaces to Tabs &#013;  number of space to tabs&#013;  is taken from menu option tab size&#013;&#013;see the dots change to lines on invisibles&#013;Note: menu option Atomic Soft Tabs makes spaces from tabs key&#013; https://www.browserling.com/tools"> 
<script>    
  function convertspacestotab(){
      // next from https://www.browserling.com/tools/spaces-to-tabs
      //       $(function(){mkTool("spaces-to-tabs",function(t){var a=$("#spaces-to-tabs-count").val(),e=new RegExp(" {"+a+"}","g");return t.replace(e,"	")})});
      var text=editor.getValue();                               // get editor text
      var a = tabinput.value;                                   // menu option input number tabsize
      // this gets atomic when atomic is checked ;-)
      e = new RegExp(" {" + a + "}", "g");                      // https://www.browserling.com/tools
      var textt= text.replace(e, "	");
      editor.getSession().setValue(textt);                      // set editor text now tabs invisibles
      minimapeditor.setValue(editor.getSession().getValue());   // set minimap text
  }
 </script>  

    <input type="button" class="dropbt" onclick="converttabstospaces();" id="" value="Convert Tabs to Spaces" onmouseover="this.focus()" 
    title="Convert Tabs to Spaces &#013;  number of space from tabs&#013;  is taken from menu option tab size&#013;&#013;see the tab lines change to dots on invisible&#013;Note: menu option Atomic Soft Tabs makes spaces from tabs keys&#013; https://www.browserling.com/tools"> 
<script>    
  function converttabstospaces(){
      // next from https://www.browserling.com/tools/spaces-to-tabs
      //      $(function(){mkTool("tabs-to-spaces",function(o){for(var c=$("#tabs-to-spaces-count").val(),a="",t=1;t<=c;t++)a+=" ";return o.replace(/\t/g,a)})});
      var text=editor.getValue();                               // get editor text                                
      for (var c = tabinput.value, a = "", t = 1; t <= c; t++)a += " ";// c= menu options input number tabsize https://www.browserling.com/tools
      var textt= text.replace(/\t/g, a);
      editor.getSession().setValue(textt);                      // set editor text now dots invisibles
      minimapeditor.setValue(editor.getSession().getValue());   // set minimap text
  }
 </script>   


     <input type="button" class="dropbt" onclick="removetail();" id="" value="Remove Tail" onmouseover="this.focus()" 
    title="Remove Tail  &#013; Remove spaces and tabs from end of line&#013;"> 
    <br>
<script>    
  function removetail(){
      // get max lines of file
      //   console.log("editor.session.getLength()",editor.session.getLength());
      // https://stackoverflow.com/questions/24695377/replace-content-of-the-line-in-ace-editor-and-overwrite-it
     var r = "";
     var t="";
     var temp = "";
     let n=editor.session.getLength();
     var Range = require("ace/range").Range
     // for (let i = 0; i < n; i++){
     //     t=editor.session.getLine(i);
     //     r=t.trimEnd();
     //     editor.session.replace(new Range(i,0,i,Number.MAX_VALUE),r);
     // }  
//same for loop as above but now minimized for speed?
for(i=0;i<n;i++)r=(t=editor.session.getLine(i)).trimEnd(),editor.session.replace(new Range(i,0,i,Number.MAX_VALUE),r);     
 
      //editor.getSession().setValue(result);                    // set editor text 
      minimapeditor.setValue(editor.getSession().getValue());   // set minimap text
  }
 </script>  

      <input type="button" class="dropbt" onclick="removelead();" id="" value="Remove Leading" onmouseover="this.focus()" 
    title="Remove Lead  &#013; Remove spaces and tabs from begin of line&#013;"> 
    <br>
<script>    
  function removelead(){
      // get max lines of file
      //   console.log("editor.session.getLength()",editor.session.getLength());
      // https://stackoverflow.com/questions/24695377/replace-content-of-the-line-in-ace-editor-and-overwrite-it
     var r = "";
     var t="";
     var temp = "";
     let n=editor.session.getLength();
     var Range = require("ace/range").Range
     // for (let i = 0; i < n; i++){
     //     t=editor.session.getLine(i);
     //     r=t.trimEnd();
     //     editor.session.replace(new Range(i,0,i,Number.MAX_VALUE),r);
     // }  
//same for loop as above but now minimized for speed?
for(i=0;i<n;i++)r=(t=editor.session.getLine(i)).trimStart(),editor.session.replace(new Range(i,0,i,Number.MAX_VALUE),r);     
 
      //editor.getSession().setValue(result);                    // set editor text 
      minimapeditor.setValue(editor.getSession().getValue());   // set minimap text
  }
 </script>  


      <input type="button" class="dropbt" onclick="removeempty();" id="" value="Remove empty lines" onmouseover="this.focus()" 
    title="Remove Empty  &#013; Remove empty lines &#013;"> 
    <br>
<script>    
  function removeempty(){
      var text = editor.getSession().getValue();
      // https://stackoverflow.com/questions/16369642/javascript-how-to-use-a-regular-expression-to-remove-blank-lines-from-a-string
      // text.replace(/^(?=\n)$|^\s*|\s*$|\n\n+/gm, ""); // this removes also leading and tailing
      text=text.replace(/(\r?\n)\s*\1+/g, '$1');
      editor.getSession().setValue(text);  
      
      
      play();
  }
 </script> 


      <input type="button" class="dropbt" onclick="editor.undo();" id="" value="Undo, ctrl + z" onmouseover="this.focus()" 
    title="Undo last action  &#013; ctrl + z &#013;"> 
    <br>
     <input type="button" class="dropbt" onclick="editor.redo();" id="" value="Redo, ctrl+shift+z" onmouseover="this.focus()" 
    title="Redo last action  &#013; ctrl + shift + z &#013;"> 
    <br>












   <input type="button" class="dropbt" id="" onclick="" title="" style="" onmouseover="this.focus()" value="-----">
   <br>
    <input type="button" class="dropbt" onclick="pretty()" id="" value="Beautify / Prettify" onmouseover="this.focus()"
    title="Beautify / Prettify&#013;  Format HTML Code&#013;&#013;Sorry NO UnDo&#013&#013;https://github.com/beautify-web/js-beautify&#013;https://beautifier.io/&#013;   make an options menu?">
 <script>
   function pretty(){
       var text=editor.getValue();
       // ace beautify does not work nice
       // use another
       // https://github.com/beautify-web/js-beautify
       // https://beautifier.io/
       var pretty=html_beautify(text,{
  "indent_size": "2",
  "indent_char": " ",
  "max_preserve_newlines": "5",
  "preserve_newlines": true,
  "keep_array_indentation": false,
  "break_chained_methods": false,
  "indent_scripts": "keep",
  "brace_style": "collapse",
  "space_before_conditional": true,
  "unescape_strings": false,
  "jslint_happy": true,
  "end_with_newline": true,
  "wrap_line_length": "0",
  "indent_inner_html": true,
  "comma_first": false,
  "e4x": false,
  "indent_empty_lines": false
});
       editor.getSession().setValue(pretty);                      // set editor 
       minimapeditor.setValue(editor.getSession().getValue());   // set minimap text
   }
   </script>

                <!-- start submenu /*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->
              <div class="dropdowntwo">
              <button class="dropbtntwo" title="Beautify Options" onmouseover="this.focus()">Options</button>
                <div class="dropdowntwo-content" style="left:50px;max-width:400px;width:400px;margin:10px;padding:10px;">
                  
<font color="lightgray">

          <select name="tabsize" id="tabsize">
            <option value="1">Indent with a tab character</option>
            <option value="2">Indent with 2 spaces</option>
            <option value="3">Indent with 3 spaces</option>
            <option value="4">Indent with 4 spaces</option>
            <option value="8">Indent with 8 spaces</option>
          </select>
          <select name="max-preserve-newlines" id="max-preserve-newlines">
            <option value="-1">Remove all extra newlines</option>
            <option value="1">Allow 1 newline between tokens</option>
            <option value="2">Allow 2 newlines between tokens</option>
            <option value="5">Allow 5 newlines between tokens</option>
            <option value="10">Allow 10 newlines between tokens</option>
            <option value="0">Allow unlimited newlines between tokens</option>
          </select>
          <select name="wrap-line-length" id="wrap-line-length">
            <option value="0">Do not wrap lines</option>
            <option value="40">Wrap lines near 40 characters</option>
            <option value="70">Wrap lines near 70 characters</option>
            <option value="80">Wrap lines near 80 characters</option>
            <option value="110">Wrap lines near 110 characters</option>
            <option value="120">Wrap lines near 120 characters</option>
            <option value="160">Wrap lines near 160 characters</option>
          </select>
          <select id="brace-style">
            <option value="collapse">Braces with control statement</option>
            <option value="expand">Braces on own line</option>
            <option value="end-expand">End braces on own line</option>
            <option value="none">Attempt to keep braces where they are</option>
          </select>
        
            <p style="margin:6px 0 0 0">HTML &lt;style&gt;, &lt;script&gt; formatting:</p>
            <select id="indent-scripts">
              <option value="keep">Keep indent level of the tag</option>
              <option value="normal">Add one indent level</option>
              <option value="separate">Separate indentation</option>
            </select>
        
<br><br>

<!--
                    <input type="checkbox"><input type="button" class="dropbttwo" onclick="" style="" title="" value="End script and style with newline?" onmouseover="this.focus()"><br>
                    <input type="checkbox"><input type="button" class="dropbttwo" onclick='' style="" title="" value="Support e4x/jsx syntax"  onmouseover="this.focus()"><br>
                    <input type="checkbox"><input type="button" class="dropbttwo" onclick='' style="" title="" value="Use comma-first list style?" onmouseover="this.focus()"><br>
                    <input type="checkbox"><input type="button" class="dropbttwo" onclick='' style="" title="" value="Detect packers and obfuscators?" onmouseover="this.focus()"><br>
                    <input type="checkbox"><input type="button" class="dropbttwo" onclick='' style="" title="" value="Preserve inline braces/code blocks?" onmouseover="this.focus()"><br>
                    <input type="checkbox"><input type="button" class="dropbttwo" onclick='' style="" title="" value="Keep array indentation?" onmouseover="this.focus()"><br>
                    <input type="checkbox"><input type="button" class="dropbttwo" onclick='' style="" title="" value="Break lines on chained methods?" onmouseover="this.focus()"><br>
                    <input type="checkbox"><input type="button" class="dropbttwo" onclick='' style="" title="" value='Space before conditional: "if(x)" / "if (x)"' onmouseover="this.focus()"><br>
                    <input type="checkbox"><input type="button" class="dropbttwo" onclick='' style="" title="" value="Unescape printable chars encoded as \xNN or \uNNNN?" onmouseover="this.focus()"><br>
                    <input type="checkbox"><input type="button" class="dropbttwo" onclick='' style="" title="" value="Use JSLint-happy formatting tweaks?" onmouseover="this.focus()"><br>
                    <input type="checkbox"><input type="button" class="dropbttwo" onclick='' style="" title="" value="Indent <head> and <body> sections?" onmouseover="this.focus()"><br>
                    <input type="checkbox"><input type="button" class="dropbttwo" onclick='' style="" title="" value="Keep indentation on empty lines?" onmouseover="this.focus()"><br>                
 -->
           <input class="checkbox" type="checkbox" id="end-with-newline">
          <label for="end-with-newline" onmouseover="" title="Title Test">End script and style with newline?</label>
          <br>
          <input class="checkbox" type="checkbox" id="e4x">
          <label for="e4x" title="Title Test">Support e4x/jsx syntax</label>
          <br>
          <input class="checkbox" type="checkbox" id="comma-first">
          <label for="comma-first" title="Title Test">Use comma-first list style?</label>
          <br>
          <input class="checkbox" type="checkbox" id="detect-packers">
          <label for="detect-packers" title="Title Test">Detect packers and obfuscators?</label>
          <br>
          <input class="checkbox" type="checkbox" id="brace-preserve-inline">
          <label for="brace-preserve-inline" title="Title Test">Preserve inline braces/code blocks?</label>
          <br>
          <input class="checkbox" type="checkbox" id="keep-array-indentation">
          <label for="keep-array-indentation" title="Title Test">Keep array indentation?</label>
          <br>
          <input class="checkbox" type="checkbox" id="break-chained-methods">
          <label for="break-chained-methods" title="Title Test">Break lines on chained methods?</label>
          <br>
          <input class="checkbox" type="checkbox" id="space-before-conditional">
          <label for="space-before-conditional" title="Title Test">Space before conditional: "if(x)" / "if (x)"</label>
          <br>
          <input class="checkbox" type="checkbox" id="unescape-strings">
          <label for="unescape-strings" title="Title Test">Unescape printable chars encoded as \xNN or \uNNNN?</label>
          <br>
          <input class="checkbox" type="checkbox" id="jslint-happy">
          <label for="jslint-happy" title="Title Test">Use JSLint-happy formatting tweaks?</label>
          <br>
          <input class="checkbox" type="checkbox" id="indent-inner-html">
          <label for="indent-inner-html" title="Title Test">Indent &lt;head&gt; and &lt;body&gt; sections?</label>
          <br>
          <input class="checkbox" type="checkbox" id="indent-empty-lines">
          <label for="indent-empty-lines" title="Title Test">Keep indentation on empty lines?</label>
         
                    <a href="https://beautifier.io/?without-codemirror" target="beauty">https://beautifier.io/?without-codemirror
              </font>
              <center><img src="https://beautifier.io/web/banner-light.svg"></center>
               </a>  </div>
              </div>
              <!--  end submenu /*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->



<br>
   <input type="button" class="dropbt" id="" onclick="" title="" style="" onmouseover="this.focus()" value="-----">
   
<br>
              <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->
              <div class="dropdowntwo">
              <button class="dropbtntwo" title="Test sub menu 1?" onmouseover="this.focus()">Test sub menu 1? </button>
                <div class="dropdowntwo-content">
                    <input type="button" class="dropbttwo" onclick="" style="" title="--- 1 test sub menu 1 ---" value="--- 1 test sub menu 1 ---" onmouseover="this.focus()"><br>
                    <input type="button" class="dropbttwo" onclick='' style="" title="--- 1 test sub menu 2 ---" value="--- 1 test sub menu 2 ---"  onmouseover="this.focus()"><br>
                    <input type="button" class="dropbttwo" onclick='' style="" title="--- 1 test sub menu 3 ---" value="--- 1 test sub menu 3 ---" onmouseover="this.focus()"><br>
                </div>
              </div>
              <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->


   <br>
                 <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->
              <div class="dropdowntwo">
              <button class="dropbtntwo" title="Test sub menu 2?" onmouseover="this.focus()">Test sub menu 2? </button>
                <div class="dropdowntwo-content">
                    <input type="button" class="dropbttwo" onclick="" style="" title="--- 2 test sub menu 1 ---" value="--- 2 test sub menu 1 ---" onmouseover="this.focus()"><br>
                    <input type="button" class="dropbttwo" onclick='' style="" title="--- 2 test sub menu 2 ---" value="--- 2 test sub menu 2 ---"  onmouseover="this.focus()"><br>
                    <input type="button" class="dropbttwo" onclick='' style="" title="--- 2 test sub menu 3 ---" value="--- 2 test sub menu 3 ---" onmouseover="this.focus()"><br>
                    <input type="button" class="dropbttwo" onclick='' style="" title="--- 2 test sub menu 4 ---" value="--- 2 test sub menu 4 ---" onmouseover="this.focus()"><br>
                    <input type="button" class="dropbttwo" onclick='' style="" title="--- 2 test sub menu 5 ---" value="--- 2 test sub menu 5 ---" onmouseover="this.focus()"><br>
                </div>
              </div>
              <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->


   <br>
   <input type="button" class="dropbt" id="" onclick="" title="" style="" onmouseover="this.focus()" value="-----">
   <br>
    <input type="button" class="dropbt" id="" onclick="" title="" style="" onmouseover="this.focus()" value="- not yet!-">
   <br>
    <input type="button" class="dropbt" id="" onclick="terserall();" title="Yep thats minify ;-) &#013; Warned you &#013; Terser? &#013; https://terser.org/ &#013; https://github.com/terser/terser" style="" onmouseover="this.focus()" value="Minify / Uglify">
    
<!--
<script src="https://cdn.jsdelivr.net/npm/source-map@0.7.3/dist/source-map.js"></script>
<script src="https://cdn.jsdelivr.net/npm/terser/dist/bundle.min.js"></script>
-->
<script defer="defer" src="https://extendsclass.com/lib/terser/dist/bundle.min.js"></script>

    
    <script>
      function terserall(){
        play();
        var text=editor.getValue();
       var code = text;
        var result = Terser.minify(code);
  // var result = await minify(code, {sourceMap: true}); // this breaks the function tersersall , minify not found, await maybe problem
         console.log(result.code);  // minified output: function add(n,d){return n+d}
        console.log(result.map);  // source map
      editor.getSession().setValue(result.code);                      // set editor text now dots invisibles
      minimapeditor.setValue(editor.getSession().getValue());   // set minimap text
      }
</script>
                <!-- start submenu /*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->
              <div class="dropdowntwo">
              <button class="dropbtntwo" title="Terser Uglification Options" onmouseover="this.focus()">Options</button>
                <div class="dropdowntwo-content" style="top:-300px;left:50px;max-width:400px;width:400px;margin:10px;padding:10px;">
                  
<font color="lightgray">

  <div class="options">
    <form class="mr-1">

    <input type="checkbox" :id="option.id" x-model="option.checked" id="caseSensitive" value="">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="caseSensitive" class="" 
    title="Treat attributes in case sensitive manner (useful for custom HTML tags)">
    Case-sensitive</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="collapseBooleanAttributes">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="collapseBooleanAttributes" class="" 
    title="Omit attribute values from boolean attributes">
    Collapse boolean attributes</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="collapseInlineTagWhitespace" value="">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="collapseInlineTagWhitespace" class="unsafe" 
    title="Don't leave any spaces between <code>display:inline;</code> elements when collapsing. Must be used in conjunction with <code>collapseWhitespace=true">
      Collapse inline tag whitespace</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="collapseWhitespace">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="collapseWhitespace" class="" 
    title='Collapse white space that contributes to text nodes in a document tree'>
    Collapse whitespace</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="conservativeCollapse" value="">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="conservativeCollapse" class="" 
    title='conservativeCollapse'>
    conservativeCollapse</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="decodeEntities">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="decodeEntities" class="" 
    title='Use direct Unicode characters whenever possible'>
    Decode Entity Characters</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="html5">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="html5" class="" 
    title='Parse input according to HTML5 specifications'>
    HTML5</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="includeAutoGeneratedTags" value="">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="includeAutoGeneratedTags" class="" 
    title='Insert tags generated by HTML parser'>
    Include auto-generated tags</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="keepClosingSlash" value="">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="keepClosingSlash" class="" 
    title='Keep the trailing slash on singleton elements'>
    Keep closing slash</label><br>

    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="maxLineLength" class="" 
    title="Specify a maximum line length. Compressed output will be split by newlines at valid HTML split-points">
    Max. line length</label>
    <input type="number" :id="option.id" x-model="option.value" id="maxLineLength"><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="minifyCSS">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="minifyCSS" class="" 
    title="Minify CSS in style elements and style attributes (uses <code>clean-css</code>)">
    Minify CSS</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="minifyJS">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="minifyJS" class="" 
    title="Minify JavaScript in script elements and event attributes (uses <code>Terser</code>)">
    Minify JavaScript</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="minifyURLs" value="">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="minifyURLs" class="" 
    title='Minify URLs in various attributes (uses <code>relateurl</code>)'>
    Minify URLs</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="noNewlinesBeforeTagClose" value="">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="noNewlinesBeforeTagClose" class="" 
    title='Never add a newline before a tag that closes an element'>
    No newline before Tag Close</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="preserveLineBreaks" value="">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="preserveLineBreaks" class="" 
    title="Always collapse to 1 line break (never remove it entirely) when whitespace between tags include a line break. Must be used in conjunction with <code>collapseWhitespace=true</code>">
    Preserve line-breaks</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="preventAttributesEscaping" value="">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="preventAttributesEscaping" class="unsafe" 
    title='Prevents the escaping of the values of attributes'>
    Prevent attributes escaping</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="processConditionalComments">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="processConditionalComments" class="" 
    title='Process contents of conditional comments through minifier'>
    Process conditional comments</label><br>

    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="processScripts" class="" 
    title='Comma-delimited string corresponding to types of script elements to process through minifier (e.g. <code>text/ng-template, text/x-handlebars-template</code>)'>
    Process scripts</label>
    <input type="text" :id="option.id" x-model="option.value" id="processScripts"><br>

    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="quoteCharacter" class="" 
    title='Type of quote to use for attribute values \' '>
    Quote character</label>
    <input type="text" :id="option.id" x-model="option.value" id="quoteCharacter"><br>



    <input type="checkbox" :id="option.id" x-model="option.checked" id="removeAttributeQuotes">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? ' unsafe' : ''" for=" removeAttributeQuotes" class="" 
    title='Remove quotes around attributes when possible'>
    Remove attribute quotes</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="removeComments">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="removeComments" class="">
      Remove Strip HTML comments</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="removeEmptyAttributes">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="removeEmptyAttributes" class="" 
    title='Remove all attributes with whitespace-only values'>
    Remove empty attributes</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="removeEmptyElements" value="">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="removeEmptyElements" class="unsafe" 
    title='Remove all elements with empty contents'>
    Remove empty elements</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="removeOptionalTags">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="removeOptionalTags" class="">
      Remove optional tags</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="removeRedundantAttributes">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="removeRedundantAttributes" class="" 
    title='Remove attributes when value matches default.'>
    Remove redundant attributes</label><br>
    

    <input type="checkbox" :id="option.id" x-model="option.checked" id="removeScriptTypeAttributes">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="removeScriptTypeAttributes" class="" 
    title='Remove <code>type="text/javascript"</code> from <code>script</code> tags. Other <code>type</code> attribute values are left intact'>
    Remove script type attributes</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="removeStyleLinkTypeAttributes">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="removeStyleLinkTypeAttributes" class="" 
    title='Remove <code>type="text/css"</code> from <code>style</code> and <code>link</code> tags. Other <code>type</code> attribute values are left intact'>
    Remove style link type attributes</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="removeTagWhitespace">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="removeTagWhitespace" class="unsafe" 
    title='Remove space between attributes whenever possible. <em>Note that this will result in invalid HTML!</em>'>
    Remove tag whitespace</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="sortAttributes">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="sortAttributes" class="unsafe" 
    title='Sort attributes by frequency'>
    Sort attributes</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="sortClassName">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="sortClassName" class="unsafe" 
    title='Sort style classes by frequency'>
    Sort class name</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="trimCustomFragments">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="trimCustomFragments" class="" 
    title='Trim white space around <code>ignoreCustomFragments</code>.'>
    Trim white space around custom fragments</label><br>

    <input type="checkbox" :id="option.id" x-model="option.checked" id="useShortDoctype">
    <label :for="option.id" x-text="option.label" :class="option.unsafe ? 'unsafe' : ''" for="useShortDoctype" class="" 
    title='Replaces the <code>doctype</code> with the short (HTML5) <code>doctype</code>'>
    Use short doctype</label><br>

    </form>
</div><span>Select:</span>
  <input type="button" onclick="selectAllOptions(true)" value="All">
  <input type="button" onclick="selectAllOptions(false)" value="None">
  <input type="button" onclick="resetOptions()" value="Reset">
  <a href="https://terser.org/html-minifier-terser/" target="ugly">
  <center><img src="https://terser.org/img/terser-banner-logo.svg" width="200px"></center></a>
              </font></div> </div></div>
                 </div>
              </div>
              <!--  end submenu /*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->



    <!--   <input type="button" class="dropbt" id="invisiblesbutton" onclick="toggleinvisibles()" title="Toggle Invisibles" style="" onmouseover="this.focus()" value="Hide Invisibles">
  -->
  </div>
</div>
<!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->


<!--
///////////////////////////
// menu button view 
/////////////////////////// 
-->
 <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->
 <div class="dropdown">
  <button class="dropbtn" onmouseover="this.focus()">View</button>
  <div class="dropdown-content">
    <input type="button" class="dropbt" onclick="showhideminimap()" id="minimapbutton" value="Hide MiniMap" onmouseover="this.focus()">
    <input type="button" class="dropbt" onclick="showhidepreview()" id="previewbutton" value="Hide Preview" onmouseover="this.focus()">
    <input type="button" class="dropbt" id="fullscreenbutton" onclick="toggleFullScreen()" title="Toggle FullScreen" style="" onmouseover="this.focus()" value="FullScreen">
    <input type="button" class="dropbt" id="linenmbrsbutton" onclick="togglelinenumbers()" title="Toggle the Gutter LineNumbers" style="" onmouseover="this.focus()" value="Hide LineNumbers">
    <input type="button" class="dropbt" id="invisiblesbutton" onclick="toggleinvisibles()" title="Toggle Invisibles" style="" onmouseover="this.focus()" value="Hide Invisibles">
    <input type="button" onclick="toggleconsole()" title="Toggle Editor console" style="" onmouseover="this.focus()" value="Toggle Editor Console">
    <input type="button"   onclick="toggleVisibility('cont_ai_ner')" title="GPT OpenAI API" style="color:greenyellow;" onmouseover="this.focus()" value="Toggle A.I. Chat">
  </div>
</div>
<!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->



<!--
///////////////////////////
// menu button Options
/////////////////////////// 
-->
 <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->
 <div class="dropdown">
  <button class="dropbtn" onmouseover="this.focus()">Options</button> 
  <div class="dropdown-content"style="width:200;" > 
    <input type="button" class="dropbt" value="Ace Settings Menu" onClick='ace.edit("editor").execCommand("showSettingsMenu");' title="Show ACE Settings Menu"  onmouseover="this.focus()">
    <button class="dropbt" onclick="" id=""  onmouseover="this.focus()" title="Tab is based on +this.value+ spaces">TabSize: 
      <input type="number" step="1" class="" id="tabinput" oninput="editor.setOption('tabSize', this.value);"  style="width:30px;"value="2" min="2" onmouseover="this.focus()" title="Tab is based on +this.value+ spaces"> </button> <br>

<!-- atomic soft tabs -->
 <input type="checkbox" id="chcksofttabs" onchange="togglesofttabs()" 
 title='Atomic Soft Tabs&#013;   off Tab is a line in invisibles (maybe smaller faster code?) &#013;   on Tab is made of spaces, dots in invisibles&#013;&#013;maybe make a Edit option to convert spaces to tabs'>
 <button class="dropbt" onclick="if(chcksofttabs.checked){chcksofttabs.checked=false;}else{chcksofttabs.checked=true;};togglesofttabs()" id="" value="" onmouseover="this.focus()" 
 title='Atomic Soft Tabs&#013;   off Tab is a line in invisibles (maybe smaller faster code?) &#013;   on Tab is made of spaces, dots in invisibles&#013;&#013;maybe make a Edit option to convert spaces to tabs'>Atomic Soft Tabs</button><br>
<script>
function togglesofttabs(){
  if(chcksofttabs.checked){
			editor.setOption('useSoftTabs', true);  
      console.log("check true togglesofttabs");
  }else{
     editor.setOption('useSoftTabs', false); 
     console.log("check false togglesofttabs");
  }
}
</script>
<!-- atomic soft tabs -->

<!-- auto  indent -->
 <input type="checkbox" id="chcklai" onchange="toggleautoindent()" checked  
 title='Auto indent&#013;   off start a new line at begin&#013;   on start a new line at tabbed position of previous line'>
 <button class="dropbt" onclick="if(chcklai.checked){chcklai.checked=false;}else{chcklai.checked=true;};toggleautoindent()" id="" value="" onmouseover="this.focus()" 
 title='Auto indent&#013;   off start a new line at begin&#013;   on start a new line at tabbed position of previous line'>Auto indent</button><br>
<script>
function toggleautoindent(){
  if(chcklai.checked){
			//editor.setOption('behavioursEnabled', true);  // auto close (){}[] and maybe also <div> etc
      editor.setOption('enableAutoIndent', true);
      console.log("check true auto indent");
  }else{
     //editor.setOption('behavioursEnabled', false); // auto close (){}[] and maybe also <div> etc
     editor.setOption('enableAutoIndent', false);
     console.log("check false auto indent");
  }
}
</script>
<!-- auto  indent -->

<!--  toggleliveautocompletion -->
<input type="checkbox" id="chcklac" onchange="toggleliveautocompletion()" checked  
title='Live Auto Completion, Suggestion, Snippets, PopUp&#013;if off&#013;Swittch to Basic AutoCompletion&#013;CTRL+Space&#013;Shows the PopUp &#013;'><button class="dropbt" onclick="if(chcklac.checked){chcklac.checked=false;}else{chcklac.checked=true;};toggleliveautocompletion()" id="" value="" onmouseover="this.focus()" title='Live Auto Completion, Suggestion, Snippets, PopUp&#013;if off&#013;Swittch to Basic AutoCompletion&#013;CTRL+Space&#013;Shows the PopUp &#013;'>AutoCompletion</button><br>
<script>
function toggleliveautocompletion(){
  if(chcklac.checked){
    	//editor.setOption('enableBasicAutocompletion', true);
			editor.setOption('enableLiveAutocompletion', true);
      console.log("check true enableLiveAutocompletion");
  }else{
     //editor.setOption('enableBasicAutocompletion', false);
     editor.setOption('enableLiveAutocompletion', false);
     console.log("check false enableLiveAutocompletion");
  }
}
</script>
<!--  toggleliveautocompletion -->

<!-- toggleWraplonglines  -->
<input type="checkbox" id="tgglwrplnglns" onchange="toggleWraplonglines()"><button class="dropbt" onclick="if(tgglwrplnglns.checked){tgglwrplnglns.checked=false;}else{tgglwrplnglns.checked=true;};toggleWraplonglines()" id="" value="" onmouseover="this.focus()">Wrap Long Lines</button>
<script>
function toggleWraplonglines(){
  if(tgglwrplnglns.checked){
    	//editor.setOption('enableBasicAutocompletion', true);
			editor.setOption('wrap', true);
      console.log("wrap true");
  }else{
     //editor.setOption('enableBasicAutocompletion', false);
     editor.setOption('wrap', false);
     console.log("wrap false");
  }
}
</script>
<!-- toggleWraplonglines  -->
<br>
 <input type="checkbox" id="chckbehaviours" onchange="togglebehaviours()" checked  
 title='behavioursEnabled&#013;   off no auto close { [ ( <cemter> " &#013;   on auto close () [] {} <center></center> Etc.'>
 <button class="dropbt" onclick="if(chckbehaviours.checked){chckbehaviours.checked=false;}else{chckbehaviours.checked=true;};togglebehaviours()" id="" value="" onmouseover="this.focus()" 
 title='behavioursEnabled&#013;   off no auto close { [ ( <cemter> " &#013;   on auto close () [] {} <center></center> Etc.'>Behaviours</button><br>
<script>
function togglebehaviours(){
  if(chckbehaviours.checked){
			editor.setOption('behavioursEnabled', true);  // auto close (){}[] and maybe also <div> etc
      console.log("check true behavioursEnabledt");
  }else{
     editor.setOption('behavioursEnabled', false); // auto close (){}[] and maybe also <div> etc
     console.log("check false behavioursEnabled");
  }
}
</script>

<input type="button" class="dropbt" id="tooltipbutton" onclick="toggletooltip()" title="Toggle menu Tooltip Popup info on / off" style="" onmouseover="this.focus()" value="Hide menu ToolTip popup">
  <script>
   
    function toggletooltip(){
      play();
      if (tooltipval==1){
          tooltipbutton.value="Show menu ToolTip popup";
          $( document ).tooltip({
              disabled: true
          });



          tooltipval=0;
      }else{  
          tooltipbutton.value="Hide menu ToolTip popup";
          $( document ).tooltip({
              disabled: false
          });     // does not show again? https://api.jqueryui.com/tooltip/#option-disabled
                  // it shows but on the ace editor layer visible on light themes
                  // not near the mouse pointer in original colors
          tooltipval=1;       
//$( document ).tooltip({
//  track: true
//});
       
$( document ).tooltip({
  position: { my: "left-250 top+15", at: "left bottom", collision: "flipfit" }
});
      }    
    }
    </script>
  <!--     <input type="button" class="dropbt" id="linenmbrsbutton" onclick="togglelinenumbers()" title="Toggle the Gutter LineNumbers" style="" onmouseover="this.focus()" value="Hide LineNumbers">
    <input type="button" class="dropbt" id="invisiblesbutton" onclick="toggleinvisibles()" title="Toggle Invisibles" style="" onmouseover="this.focus()" value="Hide Invisibles">
-->
  </div>
</div>
<!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->


 <input type="button"  id="fullscreenbutton" onclick="toggleFullScreen()" title="Toggle FullScreen" style="" onmouseover="this.focus()" value="FS">
   <input type="button" onclick="toggleconsole()" title="Toggle Editor console" style="" onmouseover="this.focus()" value="TC">
  
   <input type="button"  id="AIbutton" onclick="toggleVisibility('cont_ai_ner')" title="GPT OpenAI API" style="color:greenyellow;" onmouseover="this.focus()" value="AI">


<input type="button" value="&nbsp;F1&nbsp;" onClick='editor.execCommand("openCommandPallete")' 
 title="Show F1 Better KeyBoard ShortCuts popup Menu&#010;if use F1 button, must have focus on Editor"  onmouseover="this.focus()">
<a href="Http://paypal.me/LDijkman" target="Coffee">
<img   src="https://raw.githubusercontent.com/ldijkman/Ace_Seventh_Heaven/main/docs/Electra.jpg" style="float:right;width:22px;height:22px;margin: 0px 15px 15px 0px;"  >
</a>

<input type="button"  id="errorbutton" value="V" style="<!--transform: rotate(90deg);-->color:red;  /*rotate >*/" onclick="nexterror();" onmouseover="this.focus()" title="next warning / error">

<input type="button"  id="Sticky" value=">>" style="transform: rotate(90deg);  /*rotate >*/" onclick="editor.renderer.scrollToLine(Number.POSITIVE_INFINITY)" onmouseover="this.focus()" title="scroll to Begin">
<input type="button"  id="Sticky" value=">>" style="transform: rotate(-90deg);  /*rotate >*/" onclick="editor.renderer.scrollToLine(Number.NEGATIVE_INFINITY)"  onmouseover="this.focus()" title="scroll to End">

<input type="button"  id="Sticky" value=">" style="transform: rotate(90deg);  /*rotate >*/" onclick="editor.scrollPageDown();" onmouseover="this.focus()" title="scrollPageDown">
<input type="button"  id="Sticky" value=">" style="transform: rotate(-90deg);  /*rotate >*/" onclick="editor.scrollPageUp();" onmouseover="this.focus()" title="scrollPageUp">

 
    <script>
function joinfunction() {
   var myWindow = window.open("", "_child",  "left=200,top=100,width=700,height=700;scrollbars=1;");
//https://ldijkman.github.io/Ace_Seventh_Heaven/shortcutkeys.html
myWindow.document.write(`<html>
  <head>
    <title>hello</title>
    
<style>
body{
   font-size: 12pt;
   margin: 20px;
   padding: 20px;
}
kbd {
    font-family: Monaco, Menlo, monospace;
    font-size: 12pt;
    text-transform: capitalize;
    border: 1px solid #969896;
    padding: 1px 5px;
    border-radius: 3px;
    color: #a3685a;
    background-color: #ffffff;
}

user agent stylesheet
kbd {
    font-family: monospace;
}
</style>

</head>
<body bgcolor="lightgray">

<br>
the F1 shortcut menu should look like this?<br>
<br>
<table>
<tbody>
<tr>
<td>Ace Settings</td>
<td><span class="nsoa"><kbd>ctrl</kbd> + <kbd>,</kbd> CTRL+Comma</span></td>
</tr>
<tr>
<td>Shortcuts Menu</td>
<td><span class="nsoa"><kbd>F1</kbd></span></td>
</tr>
<tr>
<td>Search / Find</td>
<td><span class="nsoa"><kbd>ctrl</kbd> + <kbd>f</kbd></span></td>
</tr>
<tr>
<td>Undo</td>
<td><span class="nsoa"><kbd>ctrl</kbd> + <kbd>z</kbd></span></td>
</tr>
<tr>
<td>Redo</td>
<td><span class="nsoa"> <kbd>ctrl</kbd> + <kbd>shift</kbd> + <kbd>z</kbd></span></td>
</tr>
<tr>
<td>Select All</td>
<td><span class="nsoa"><kbd>ctrl</kbd> + <kbd>a</kbd></span></td>
</tr>
<tr>
<td>Paste</td>
<td><span class="nsoa"><kbd>ctrl</kbd> + <kbd>v</kbd></span></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>

more to add<br>
anyone interestend in making a help page?
https://github.com/ldijkman/Ace_Seventh_Heaven/blob/main/docs/shortcutkeys.html<br>
<!-- DivTable.com -->
<br>
<pre>
  Menu Options 
    checkbox      
        Live Auto Completion, Suggestion, Snippets, PopUp
    if off 
       Swittch to Basic AutoCompletion
    CTRL+Space
       Shows the Suggestions PopUp

</pre>
<center
<br>
<iframe width="480" height="240" src="https://www.youtube.com/embed/JeYSttRZKmA" title="Why Should You Learn Vim" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<br>
<a href="https://youtu.be/JeYSttRZKmA" target="vim">Ace VIM type KeyBinding, Why</a><br>
<br>
<a href="https://github.com/23maverick23/nsoa-console" target="button">
button idea from nsoa-console</a><br>
</body>
</html>`);
}

</script>

<!--
///////////////////////////
// menu button Help
/////////////////////////// 
-->
 <!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->
 <div class="dropdown">
  <button class="dropbtn" onmouseover="this.focus()">Help</button>
  <div class="dropdown-content">
    <button class="dropbt" style="width:90px;" onclick="joinfunction()" type="button" onmouseover="this.focus()">Help page</button>
     <button class="dropbt" style="width:90px;" onmouseover="this.focus()" onclick='window.open("https://github.com/ldijkman/Ace_Seventh_Heaven/issues","_Bugs")'>Bugs-issues</button>
    <button class="dropbt" style="width:90px;" onmouseover="this.focus()" onclick='window.open("https://github.com/ldijkman/Ace_Seventh_Heaven/discussions","_github")'>Discussions</button>
    <button class="dropbt" style="width:90px;" onmouseover="this.focus()" onclick='window.open("https://github.com/ldijkman/Ace_Seventh_Heaven/discussions/3","_wishlist")'>WishList-</button>
    <button class="dropbt" style="width:90px;" onmouseover="this.focus()" onclick='window.open("https://facebook.com/luberth.dijkman","_FaceBook")'>FaceBook</button>  
    <button class="dropbt" style="width:90px;" onclick="XFunction()" onmouseover="this.focus()">X Twitter</button>
    <button class="dropbt" style="width:90px;" onmouseover="this.focus()" onclick=''>-</button>
    <button class="dropbt" style="width:90px;" onmouseover="this.focus()" onclick='window.open("http://paypal.me/LDijkman","_donations")'>Donations</button>
  </div>
</div>
<!--/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover*/-->

<script>
function XFunction() {
  window.open("https://x.com/DLD52791488", "_blank");
}
</script>

 <label id="version" style="color:lightgray;font-size:14px;"></label> 


  <!--dutchorange////////////////////////////////////////////////////////////-->


<div class="container">
    <div id="editor" onmouseover='ace.edit("editor").focus();'><textarea><!doctype html>

<html>
<head>
  <script src="//cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js">
</script>
<style>
#qrcode {transform: rotate(45deg);}
</style>
</head>

<body>
Memory Problems?, Paper Memory!.
<h1>Printable Big Font Large Text week calendar 
      <br>
      with write space for reminders, paper memory anchor
      <br>
      Printable Senior Alzheimer Dementia Calendar
      <br>
      <a href="https://run.plnkr.co/plunks/SfYvlFhFkHV5UEZc/" target="printit"> full screen https://run.plnkr.co/plunks/SfYvlFhFkHV5UEZc/</a></h1>
<button onClick="window.print()">Print this page</button>
<center>
  <a href="https://tinyurl.com/plnkr" target="ly">
  <div id="qrcode"></div><br><br><br>
  https://tinyurl.com/plnkr</a><br><br>
<script type="text/javascript">new QRCode(document.getElementById("qrcode"), "https://tinyurl.com/plnkr");</script>

 
<button onClick="window.print()">Print this page</button>

<br><br>


<h1>Language Calendar</h1>
<button onClick='make_calendar("fy")'>Frysk Frisk Friesland Fries FY</button><br>
<br>
<button onClick='make_calendar("us")'>Englisch</button>
<button onClick='make_calendar("sw")'>Sweden</button>
<button onClick='make_calendar("nl")'>Dutch Nederlands</button>
<button onClick='make_calendar("it")'>Italie</button>
<button onClick='make_calendar("pl")'>Poland</button>
<button onClick='make_calendar("de")'>Germany</button>
<button onClick='make_calendar("da")'>Denmark</button>
<button onClick='make_calendar("es")'>Espanja</button>


<button onClick='make_calendar("fr")'>France</button>
<button onClick='make_calendar("FI")'>Finland</button>

<button onClick='make_calendar("PT")'>Portugese</button>
<button onClick='make_calendar("UKR")'>Ukraine</button>
<button onClick='make_calendar("TR")'>Turkije</button>


<button onClick='make_calendar("zh")'>Chinese</button>
<button onClick='make_calendar("bg")'>Bulgarian</button>
<button onClick='make_calendar("he")'>Hebrew</button>

<button onClick='make_calendar("ja")'>Japanese ja</button>
<button onClick='make_calendar("lv")'>Latvian </button>
<button onClick='make_calendar("lt")'>Lithuanian</button>
 


<button onClick='make_calendar("hi")'>Hindi</button>
<button onClick='make_calendar("ar")'>Arabic</button>
<button onClick='make_calendar("bn")'>Bengali</button>

<button onClick='make_calendar("ru")'>Russian</button>
<button onClick='make_calendar("pa")'>Punjabi</button>




<h1>or Select a Language for the Calendar</h1>

<!-- 
https://www.w3schools.com/tags/ref_language_codes.asp 
https://www.html-code-generator.com/html/drop-down/languages-name
-->

<select id="languages" name="languages">
    <option>Select Language</option>
    <option value="fy">Fries Frisk Frysk Friesland</option>
    <option value="af">Afrikaans</option>
    <option value="sq">Albanian - shqip</option>
    <option value="am">Amharic - </option>
    <option value="ar">Arabic - </option>
    <option value="an">Aragonese - aragons</option>
    <option value="hy">Armenian - </option>
    <option value="ast">Asturian - asturianu</option>
    <option value="az">Azerbaijani - azrbaycan dili</option>
    <option value="eu">Basque - euskara</option>
    <option value="be">Belarusian - </option>
    <option value="bn">Bengali - </option>
    <option value="bs">Bosnian - bosanski</option>
    <option value="br">Breton - brezhoneg</option>
    <option value="bg">Bulgarian - </option>
    <option value="ca">Catalan - catal</option>
    <option value="ckb">Central Kurdish -  ( )</option>
    <option value="zh">Chinese - </option>
    <option value="zh-HK">Chinese (Hong Kong) - </option>
    <option value="zh-CN">Chinese (Simplified) - </option>
    <option value="zh-TW">Chinese (Traditional) - </option>
    <option value="co">Corsican</option>
    <option value="hr">Croatian - hrvatski</option>
    <option value="cs">Czech - etina</option>
    <option value="da">Danish - dansk</option>
    <option value="nl">Dutch - Nederlands</option>
    <option value="en">English</option>
    <option value="en-AU">English (Australia)</option>
    <option value="en-CA">English (Canada)</option>
    <option value="en-IN">English (India)</option>
    <option value="en-NZ">English (New Zealand)</option>
    <option value="en-ZA">English (South Africa)</option>
    <option value="en-GB">English (United Kingdom)</option>
    <option value="en-US">English (United States)</option>
    <option value="eo">Esperanto - esperanto</option>
    <option value="et">Estonian - eesti</option>
    <option value="fo">Faroese - froyskt</option>
    <option value="fil">Filipino</option>
    <option value="fi">Finnish - suomi</option>
    <option value="fr">French - franais</option>
    <option value="fr-CA">French (Canada) - franais (Canada)</option>
    <option value="fr-FR">French (France) - franais (France)</option>
    <option value="fr-CH">French (Switzerland) - franais (Suisse)</option>
    <option value="gl">Galician - galego</option>
    <option value="ka">Georgian - </option>
    <option value="de">German - Deutsch</option>
    <option value="de-AT">German (Austria) - Deutsch (sterreich)</option>
    <option value="de-DE">German (Germany) - Deutsch (Deutschland)</option>
    <option value="de-LI">German (Liechtenstein) - Deutsch (Liechtenstein)</option>
    <option value="de-CH">German (Switzerland) - Deutsch (Schweiz)</option>
    <option value="el">Greek - </option>
    <option value="gn">Guarani</option>
    <option value="gu">Gujarati - </option>
    <option value="ha">Hausa</option>
    <option value="haw">Hawaiian - lelo Hawaii</option>
    <option value="he">Hebrew - </option>
    <option value="hi">Hindi - </option>
    <option value="hu">Hungarian - magyar</option>
    <option value="is">Icelandic - slenska</option>
    <option value="id">Indonesian - Indonesia</option>
    <option value="ia">Interlingua</option>
    <option value="ga">Irish - Gaeilge</option>
    <option value="it">Italian - italiano</option>
    <option value="it-IT">Italian (Italy) - italiano (Italia)</option>
    <option value="it-CH">Italian (Switzerland) - italiano (Svizzera)</option>
    <option value="ja">Japanese - </option>
    <option value="kn">Kannada - </option>
    <option value="kk">Kazakh -  </option>
    <option value="km">Khmer - </option>
    <option value="ko">Korean - </option>
    <option value="ku">Kurdish - Kurd</option>
    <option value="ky">Kyrgyz - </option>
    <option value="lo">Lao - </option>
    <option value="la">Latin</option>
    <option value="lv">Latvian - latvieu</option>
    <option value="ln">Lingala - lingla</option>
    <option value="lt">Lithuanian - lietuvi</option>
    <option value="mk">Macedonian - </option>
    <option value="ms">Malay - Bahasa Melayu</option>
    <option value="ml">Malayalam - </option>
    <option value="mt">Maltese - Malti</option>
    <option value="mr">Marathi - </option>
    <option value="mn">Mongolian - </option>
    <option value="ne">Nepali - </option>
    <option value="no">Norwegian - norsk</option>
    <option value="nb">Norwegian Bokml - norsk bokml</option>
    <option value="nn">Norwegian Nynorsk - nynorsk</option>
    <option value="oc">Occitan</option>
    <option value="or">Oriya - </option>
    <option value="om">Oromo - Oromoo</option>
    <option value="ps">Pashto - </option>
    <option value="fa">Persian - </option>
    <option value="pl">Polish - polski</option>
    <option value="pt">Portuguese - portugus</option>
    <option value="pt-BR">Portuguese (Brazil) - portugus (Brasil)</option>
    <option value="pt-PT">Portuguese (Portugal) - portugus (Portugal)</option>
    <option value="pa">Punjabi - </option>
    <option value="qu">Quechua</option>
    <option value="ro">Romanian - romn</option>
    <option value="mo">Romanian (Moldova) - romn (Moldova)</option>
    <option value="rm">Romansh - rumantsch</option>
    <option value="ru">Russian - </option>
    <option value="gd">Scottish Gaelic</option>
    <option value="sr">Serbian - </option>
    <option value="sh">Serbo-Croatian - Srpskohrvatski</option>
    <option value="sn">Shona - chiShona</option>
    <option value="sd">Sindhi</option>
    <option value="si">Sinhala - </option>
    <option value="sk">Slovak - slovenina</option>
    <option value="sl">Slovenian - slovenina</option>
    <option value="so">Somali - Soomaali</option>
    <option value="st">Southern Sotho</option>
    <option value="es">Spanish - espaol</option>
    <option value="es-AR">Spanish (Argentina) - espaol (Argentina)</option>
    <option value="es-419">Spanish (Latin America) - espaol (Latinoamrica)</option>
    <option value="es-MX">Spanish (Mexico) - espaol (Mxico)</option>
    <option value="es-ES">Spanish (Spain) - espaol (Espaa)</option>
    <option value="es-US">Spanish (United States) - espaol (Estados Unidos)</option>
    <option value="su">Sundanese</option>
    <option value="sw">Swahili - Kiswahili</option>
    <option value="sv">Swedish - svenska</option>
    <option value="tg">Tajik - </option>
    <option value="ta">Tamil - </option>
    <option value="tt">Tatar</option>
    <option value="te">Telugu - </option>
    <option value="th">Thai - </option>
    <option value="ti">Tigrinya - </option>
    <option value="to">Tongan - lea fakatonga</option>
    <option value="tr">Turkish - Trke</option>
    <option value="tk">Turkmen</option>
    <option value="tw">Twi</option>
    <option value="uk">Ukrainian - </option>
    <option value="ur">Urdu - </option>
    <option value="ug">Uyghur</option>
    <option value="uz">Uzbek - ozbek</option>
    <option value="vi">Vietnamese - Ting Vit</option>
    <option value="wa">Walloon - wa</option>
    <option value="cy">Welsh - Cymraeg</option>
    <option value="fy">Fries Frysk Friesland Western Frisian</option>
    <option value="xh">Xhosa</option>
    <option value="yi">Yiddish</option>
    <option value="yo">Yoruba - d Yorb</option>
    <option value="zu">Zulu - isiZulu</option>
</select>
<!-- 
https://www.w3schools.com/tags/ref_language_codes.asp 
https://www.html-code-generator.com/html/drop-down/languages-name
-->
<div id="selected-language"></div>

<script>
  
(function () {
    var language_select = document.getElementById("languages");
    var result = document.getElementById("selected-language");

    language_select.addEventListener('change', function (event) {
        var selected_value = this.value;
        var selected_text = this.options[this.selectedIndex].text;
        result.innerText = selected_value + '\n' + selected_text;
        make_calendar(selected_value);
    });
})();
</script>
</center>


<script src="https://www.w3schools.com/lib/w3.js"></script>
 <button onclick="w3.hide('.week')">Hide Week</button>
<button onclick="w3.show('.week')">Show Week</button>
 
   
<script> 


// Printable Big Text Alzheimer week calendar Senior Calendar
// memory anchor
// want to change things 
// dirk luberth dijkman
// https://codepen.io/luberth-dijkman/pen/OJwjLbQ
// https://plnkr.co/edit/SfYvlFhFkHV5UEZc


/*
nl-NL Gives back 'Vrijdag' which is Dutch for Friday.
de germany
fr france
es espanja
sw  sweden
PL Polen
it italie

ml
*/

var locale = "pl";    //set lnguage for the calendar

var jaar= 2024;











function getDayName(dateStr, locale)
{
    var date = new Date(dateStr);
    return date.toLocaleDateString(locale, { weekday: 'long' });        
}


var getMonth = function(idx, locale) {

  var objDate = new Date();
  objDate.setDate(1);
  objDate.setMonth(idx-1);

  //var locale = "it",
      month = objDate.toLocaleString(locale, { month: "long" });

    return month+' ';
}


     
var getDays = (year, month) => {
    return new Date(year, month, 0).getDate();
};



var days_fries = ['snein', 'moandei', 'tiisdei', 'woansdei', 'tongersdei', 'freed', 'sneon'];
var months_fries = ['','Jannewaris', 'Febrewaris', 'Maart', 'April', 'Maaie', 'Juny', 'July', 'Augustus', 'Septimber', 'Oktober', 'novimber', 'Desimber'];

var days_uyghur = ['snein', 'moandei', 'tiisdei', 'woansdei', 'tongersdei', 'freed', 'sneon'];
var months_uyghur = ['','Jannewaris', 'Febrewaris', 'Maart', 'April', 'Maaie', 'Juny', 'July', 'Augustus', 'Septimber', 'Oktober', 'novimber', 'Desimber'];
/*https://omniglot.com/language/time/months.htm

(yanwar)	
(fewral)	
(mart)	
(aprel)	
(may)	
(iyun)	
(iyul)	
(awust)	
(sentbir)	
(ktbir)	
(noyabir)	
(dekabir)
*/
var days_eskimo = ['snein', 'moandei', 'tiisdei', 'woansdei', 'tongersdei', 'freed', 'sneon'];
var months_eskimo = ['','Jannewaris', 'Febrewaris', 'Maart', 'April', 'Maaie', 'Juny', 'July', 'Augustus', 'Septimber', 'Oktober', 'novimber', 'Desimber'];

var days_olddutch = ['snein', 'moandei', 'tiisdei', 'woansdei', 'tongersdei', 'freed', 'sneon'];
var months_olddutch = ['','Jannewaris', 'Febrewaris', 'Maart', 'April', 'Maaie', 'Juny', 'July', 'Augustus', 'Septimber', 'Oktober', 'novimber', 'Desimber'];


function make_calendar(locale, welkjaar) {
document.write('<br><center>Maybe custom scale print preview  to fit the page better <button onClick="window.print()">Print this page</button><br></center>');
document.write('<a href="https://run.plnkr.co/plunks/SfYvlFhFkHV5UEZc/" target="kalender">https://run.plnkr.co/plunks/SfYvlFhFkHV5UEZc/</a><br>');
document.write('<style>#qrcode {transform: rotate(45deg);}</style>');
//month loop
var doy=0;
for (var maand = 1; maand <= 12; ++maand) {       
  
  
  var aantaldagen=getDays(jaar, maand);    // get number of days for year month
       
//day loop      
       for (var dag = 1; dag <= aantaldagen; ++dag) {
doy++;
         var daynrr=new Date(maand+"/"+dag+"/"+jaar);
         //document.writeln(daynrr.getDay())  
         if(daynrr.getDay()==0){     // qrcode link on sunday
            document.write('<div style="float:right;">');
            document.write('<div id="qrcode"><br><br><a href=\"https://tinyurl.com/plnkr\" target=\"plnkrcalendar\"> <img src=\"data:image/png;base64,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" heigth=\"80\" width=\"80\"></a>&nbsp;&nbsp;&nbsp;<br></div>');
            document.write('</div>');
         }
         if(daynrr.getDay()==1){   // if daynr of week is monday printer break before
                 
                document.write("<center><font style=\"font-size:10px;\">Copyright D.L.D. "+jaar+" <a href=\"//facebook.com/luberth.dijkman\" target=\"facebook\">//facebook.com/luberth.dijkman</a>  <a href=\"//PayPal.me/LDijkman\" target=\"paypal\">//PayPal.me/LDijkman</a></font></center><hr style=\"page-break-before: always;\">"); //printer pagebreak start the week at monday
                document.write("<br><center>x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x</center><br>");
                var dt = new Date(maand+"/"+dag+"/"+jaar);
                document.write('<div style="float:right;">');
                if(locale=="fy"){
                   document.write('<div id="wike"><h1>Wike '+ISO8601_week_no(dt)+'<br>'+jaar+'</h1></div>');
                }else{
                  document.write('<div class="week"><h1>Week '+ISO8601_week_no(dt)+'<br>'+jaar+'</h1></div>');
                }
                document.write('</div>');
         }

         var dateStr = maand+"/"+dag+"/"+jaar;
         if(locale=="fy"){
           var day = days_fries[daynrr.getDay()];
         }else{
            var day = getDayName(dateStr, locale);
          }
         document.write('<h1>'+day.toUpperCase()+'<br>'); 

         
         if(locale=="fy"){
             document.write(''+dag+' '+months_fries[maand]+'</h1> '+jaar);
         }else{
             document.write(''+dag+' '+getMonth(maand,locale)+'</h1> '+jaar);
         }
         if(locale=="ru"){
             document.write(' Putin Criminal Terrorist'); 
         }
 document.write("<small><small><small> doy "+doy+"</small></small></small>");
         document.write('<hr>');
        
       }


}
document.write('<br><center><button onClick="window.print()">Print this page</button><br></center>');
document.write('<a href="https://run.plnkr.co/plunks/SfYvlFhFkHV5UEZc/" target="kalender">https://run.plnkr.co/plunks/SfYvlFhFkHV5UEZc/</a><br>');

}

make_calendar("us");


function ISO8601_week_no(dt) {
     var tdt = new Date(dt.valueOf());
     var dayn = (dt.getDay() + 6) % 7;
     tdt.setDate(tdt.getDate() - dayn + 3);
     var firstThursday = tdt.valueOf();
     tdt.setMonth(0, 1);
     if (tdt.getDay() !== 4) {
      tdt.setMonth(0, 1 + ((4 - tdt.getDay()) + 7) % 7);
    }
     return 1 + Math.ceil((firstThursday - tdt) / 604800000);
}




</script>


<center>
Maybe custom scale print preview  to fit the page better  <button onClick="window.print()">Print this page</button>
<img src="https://phpqrcode.sourceforge.net/qrsample.php?data=https://run.plnkr.co/plunks/SfYvlFhFkHV5UEZc/+%3A%29&ecc=L&matrix=6" heigth="300" width="300"><br>
<button onClick="window.print()">Print this page</button>
</center>
zorg kalender, groot letter Kalender,slechtzienden kalender, geheugnhulp, Groot letter weekkalender, Zorgkalender grootletter voor slechtzienden<br>
papieren geheugen voor dementie alzheimer senioren <br>
Alzheimer & Dementie hulpmiddelen week kalender,  dementerenden kalender
big text week calendar	
senior elderly large text week calendar,,Senior bejaardes groot teksweek kalender,,,

<pre>
translate to multiple languages
google multilanguage translate spreadsheet
https://docs.google.com/spreadsheets/d/1cg4fxA8wpfjk5TPABPNsmXEJa0EtpScuERCMjMMgwx0/edit?usp=sharing
</pre>						
							
			Gelukkige Nuwe Jaar! , senior bejaardes groot teksweek kalender demensie papier geheue anker
Gzuar Vitin e Ri! , i moshuar i moshuar i moshuar i madh i javs s madhe t tekstit t kalendarit t menduris s kujtess s letrs
  ! ,            
  !              
#VALUE!
  ! ,          
#VALUE!
Yeni iliniz mbark! , byk yal byk mtn hftsi tqvim demans kaz yadda lvbr
Urte berri on! , adineko adineko adinekoen astearen asteko egutegia dementzia paper memoria aingura
  ! ,       ,  
  ! ,          
Sretna Nova godina! , stariji stariji veliki tjedan teksta Kalendar DEMENTIA papirna memorija Sidro
#VALUE!
  ! ,            
Bon any nou! , gent gran gran text de la setmana de text de la setmana de la memria de la memria de la memria de la setmana
#VALUE!
 
 
 
 
Bon annu! Senior anzianu teste grande calendariu di settimana dementina di carta di memoria di carta
Sretna Nova godina! , stariji stariji veliki tekstni tjedan kalendar demencija papirnato memorijsko sidro
astn nov rok! , senior star, velk textov tden kalend demence paprov pam kotva
Godt nytr! , Senior ldre store tekstuge kalender demens papirhukommelse anker
Gelukkig nieuwjaar! , senior oudere grote tekstweek kalender dementie papieren geheugen anker
Felian Novjaron! , Altranga Maljuna Granda Teksta Semajna Kalendara Dementika Papera Memoro -Ankro
Head uut aastat! , vanem eakas suur tekstindala kalendri dementsuse paberi mlu ankur
#VALUE!
Maligayang bagong Taon! , Senior Elderly Malaking Text Week Calendar Dementia Paper Memory Anchor
Hyv uutta vuotta! , vanhempi vanhusten suuri tekstin viikko Kalenteri Dementiapaperimuistin Ankkuri
Bonne anne! , Anchor de mmoire de la dmence de la semaine de la semaine du texte de la semaine
Feliz aninovo! , ancin ancins de idade de texto grande calendario de demencia de demencia ncora de memoria de papel
  ! ,          
Felian Novjaron! , Altranga Maljuna Granda Teksta Semajna Kalendara Dementika Papera Memoro -Ankro
Head uut aastat! , vanem eakas suur tekstindala kalendri dementsuse paberi mlu ankur
#VALUE!
Maligayang bagong Taon! , Senior Elderly Malaking Text Week Calendar Dementia Paper Memory Anchor
Hyv uutta vuotta! , vanhempi vanhusten suuri tekstin viikko Kalenteri Dementiapaperimuistin Ankkuri
Bonne anne! , Anchor de mmoire de la dmence de la semaine de la semaine du texte de la semaine



Feliz aninovo! , ancin ancins de idade de texto grande calendario de demencia de demencia ncora de memoria de papel
  ! ,          
Frohes neues Jahr! , ltere ltere Large Text Week Kalender Demenz Papierspeicher Anker




   ! ,         
#VALUE!
 ! ,          
Barka da sabon shekara! , babban tsofaffi manyan sati kalandar Tallan Kwallan Takardar Takarda Takardar Little Anga
Hauoli makahiki hou! , ka mua o n makahiki he nui i ka mua o ka helu leka uila dementia
 ! ,             
  ! ,          
Boldog j vet! , Senior ids, nagy szveght naptri demencia papr memria horgony
Gleilegt ntt r! , eldri aldrair strir textaviku dagatal vitglp papprsminni
Selamat Tahun Baru! , Senior Lansia Teks Besar Kalender Kalender Dementia Kertas Memori
Felix New Year? , Senior senes Large Text Week Calendar Dementia charta memoria anchoram
Athbhliain faoi mhaise daoibh! , Ancaire Cuimhne Pipar Filire Seachtain Sinsearach Sean -Sean -Seanir
Buon Anno! , anziani anziani anziani del calendario della settimana del calendario della demenza di memoria di memoria


 
  ! ,          
   ! ,       Dementia Paper Memory AdChor
! , 
   ! ,          
Sersala ve mibarek be! , Salnameya Mem Mem Mem Mem Mem Mem Mem Mezinahiya Pr  kal
  ! ,      
! ,  Dementia
Felix New Year? , Senior senes Large Text Week Calendar Dementia charta memoria anchoram
Laimgu Jauno gadu! , vecka gadagjuma vecka gadagjuma liel teksta nedas kalendra demences papra atmias enkurs
#VALUE!
Laiming Naujj met! , vyresnysis pagyvens didelis teksto savaits kalendoriaus demencijos popierins atminties inkaras
  ! ,             
Selamat tahun Baru! , Kalendar Kanan Minggu Besar Kalendar Dementia Dementia Kertas Anchor
! ,         
Is-Sena t-Tajba! , Anzjani Anzjani Kbar Kalendarju Kalendarju Kalendarju Dementia tal-Memorja Ankra
  ! ,          
  ! ,        Calendar Dementia   
  ! ,           ch 
Godt nytt r! , senior eldre stor tekstuke kalender demens papirminneanker


#VALUE!
 ! ,           |
#VALUE!
    !                  
  !         
Szczliwego Nowego Roku! , Senior Starszy Kalendarz Kalendarza Dua Tydzie Tekstu Dementia
Feliz Ano Novo! , idosos idosos da semana de teatro de texto grande ncora ncora de memria de papel


  ! ,         
#VALUE!
An Nou Fericit! , senior vrstnic de text mare calendar de demen de demen ancor de memorie de hrtie
An Nou Fericit! , senior vrstnic de text mare calendar de demen de demen ancor de memorie de hrtie
#VALUE!
  ! ,           
  ! ,          
  ! ,          
#VALUE!
Goredzva rakanaka! , Serior Subsly Break United Svondo Khalenda Dementia Pepa Remrory Anchor
  !             
  ! ,  senior          
astn nov rok! , Senior Star vek textov tde kalendr demencia papierov kotva
Sreno novo leto! , Stareji stareji teksto
Sannad cusub oo faraxsan! , Sarkaal sare oo waayeel ah usbuuca caadiga ah ee Telennderka Telement ProneShar CONESOR
  ! ,  senior          
Buon Anno! , Anziani anziani anziani del calendario della settimana del calendario della demenza di memoria di memoria





Wilujeng taun nggal! , sasarengan swaster sepi ageung
Heri ya mwaka mpya! , Wazee Wazee wa Maandishi ya Wazee wa Kalenda ya Kalenda Kumbukumbu ya Karatasi
Gott nytt r! , Senior ldre stor textvecka Kalender Demens Pappersminnet Ankare
  ! ,    
 ! ,          
#VALUE!
  ! ,          
! ,  dementia paper memory anchor
#VALUE!
#VALUE!
Yeni Yln Kutlu Olsun! , kdemli yal byk metin haftas takvim demans kat bellek ankraj
Tze ylyyz gutly bolsun! , uly garry kne tekst hepdelik senenama kapitalyny kazy atgysy
#VALUE!
  ! ,         '
   !           
   ! ,          
Yangi Yil muborak! , Katta yoshdagi katta matn haftaligining qog'ozli disportia xodimi langar
Chc mng nm mi! con
#VALUE!
Blwyddyn Newydd Dda! .
Lokkich nijjier! , Senior Alderly Grutte tekstwike Kalinder Dementia Paper Memory Anchor
Nyakhomtsha! , IKHAYA LOKUGQIBELA LOLWAZI LOKUGQIBELA LWE-CALDANDER OMBINI YEKHALASIA Iphepha leMentia iPhenda Imemori
   ! ,          
E ku odun, eku iyedun! , agba agba agba nla ti im-jinl Ou Kal Kalji iwe Iwe-iranti Iwe Imanjo
Jabulela unyaka omusha! , Ikhalenda Elidala Elidala Elidala Lekhalenda Lomqondo Dementia Phepha Imemori I-Anchor
						
<pre>
translate to multiple languages
google multilanguage translate spreadsheet
https://docs.google.com/spreadsheets/d/1cg4fxA8wpfjk5TPABPNsmXEJa0EtpScuERCMjMMgwx0/edit?usp=sharing
</pre>				
				
				
				
				
</body>
</html>

	 </textarea>
    </div>
  
   <div class="resizer" id="dragMe"></div>
    <div class="container__right">
            <div id="preview">
            </div>
  </div> 
</div>    
  
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/ace.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/ext-keybinding_menu.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/ext-prompt.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/ext-language_tools.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/mode-html.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/mode-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/mode-css.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/mode-c_cpp.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/snippets/html.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/snippets/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/snippets/css.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/worker-html.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/worker-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/worker-css.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/ext-searchbox.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/worker-base.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/ext-beautify.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/ext-settings_menu.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/ext-keybinding_menu.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/ext-spellcheck.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.29.0/ext-emmet.min.js" integrity="sha512-3lADipRXib6VcyVdmfwWp6vIqvY7YY9tFtt8ynRTzNxZ38Or0xcrJpGaUzmR64UoV7Vf8Zvj0cu+nqytchBErw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<script src="https://ldijkman.github.io/Ace-Editor-Click-Link-window.open-URL/hoverlink.js"></script>
<!--  https://github.com/ldijkman/Ace-Editor-Click-Link-window.open-URL/tree/main/docs 


<script type="text/javascript" src="https://ldijkman.github.io/randomnerd_esp32_wifi_manager/mrs/Ace_color/ace-colorpicker-min.js" ></script>

-->

<script type="text/javascript" src="https://ldijkman.github.io/randomnerd_esp32_wifi_manager/mrs/Ace_color/ace-colorpicker.js" ></script>

<link rel="stylesheet" href="https://ldijkman.github.io/randomnerd_esp32_wifi_manager/mrs/Ace_color/ace-colorpicker.css" />




<link rel="stylesheet" href="https://ldijkman.github.io/Ace_Seventh_Heaven/ace_settingsmenu.css" />



<script>
function id(id) {
  return document.getElementById(id);
}

var editor = ace.edit("editor")
var beauty = ace.require("ace/ext/beautify")

ace.require("ace/ext/language_tools")
ace.require("ace/ext/emmet")     // do not know what emmet is and does
editor.setTheme("ace/theme/vibrant_ink")
editor.session.setMode("ace/mode/html", function() {
	LoadColorPicker()
})
  function LoadColorPicker() {
    console.log("load colorpicker now in function LoadColorPicker");
    window.editor = ace.edit("editor");
    AceColorPicker.load(ace, editor);
  }
    var Range = ace.require('ace/range').Range // get reference to ace/range
    ace.require("ace/ext/language_tools");
    //ace.require('ace/ext/ext-linking'); // not sure if this is correct ace/ext/linking
	  ace.require("ace/ext/emmet");          // do not know what emmet is and does


// fetch ace's language tools module:
var langTools = ace.require('ace/ext/language_tools');

// data stub:
var javascript = [
{name:'setInterval(function(){},10);'},
{name:'setTimeout(function(){},10);'},
{name:'clearInterval(id);'},
{name:'clearTimeout(id);'},

{name:'document.getElementById()'},
{name:'document.getElementByClassName()'},
{name:'document.getElementsByTagName()'},

{name:'document.querySelector()'},
{name:'document.querySelectorAll()'},

{name:'console.info("HelloWorld",messageNR,"----------",newDate());'},
{name:'console.'},
{name:'console.info("test",testval);'},
{name:'log("",)'},
{name:'error("",)'},
{name:'info("",)'},
{name:'warn("",)'},
{name:'debug("",)'},
{name:'clear("clear")'},
{name:'newDate()'},
{name:'Math.PI'},
{name:'Math.abs()'},
{name:'Math.acos()'},
{name:'Math.acosh()'},
{name:'Math.asin()'},
{name:'Math.asinh()'},
{name:'Math.atan()'},
{name:'Math.atan2()'},
{name:'Math.atanh()'},
{name:'Math.cbrt()'},
{name:'Math.ceil()'},
{name:'Math.clz32()'},
{name:'Math.cos()'},
{name:'Math.cosh()'},
{name:'Math.exp()'},
{name:'Math.expml()'},
{name:'Math.floor()'},
{name:'Math.fround()'},
{name:'Math.hypot()'},
{name:'Math.imul()'},
{name:'Math.log()'},
{name:'Math.log10()'},
{name:'Math.log1p()'},
{name:'Math.log2()'},
{name:'Math.max()'},
{name:'Math.min()'},
{name:'Math.pow()'},
{name:'Math.random()'},
{name:'Math.round()'},
{name:'Math.sign()'},
{name:'Math.sin()'},
{name:'Math.sinh()'},
{name:'Math.sqrt()'},
{name:'Math.tan()'},
{name:'Math.tanh()'},
{name:'Math.trunc()'},
{name:'toggleconsole()'},
{name:'hideconsole()'},
{name:'showconsole()'},
{name:'console.clear("console.clear()")'},
{name:'var a=eval("(1000-778)*3");console.log("The Number is",a)'},
{name:'let a=3;let b=a**2;console.log("let a=3;let b=a**2;The result b is",b)'},
{name:'var a=eval("(1000-778)*3");console.log("TheNumberis",a)'},
{name:'console.info("header#legend.innerHTML=",document.getElementById("legend").innerHTML);'},
{name:'var mytimer=setInterval(function(){console.debug("setIntervaltostopdoclearInterval(nextnumber);",mytimer)},500);'},
{name:'setInterval(function(){},10);'},
{name:'document.querySelector("#legend").innerHTML+="HelloWorld!";'},

{name:`const nodeList=document.querySelectorAll('*');
for(let i=0;i<nodeList.length;i++){
nodeList[i].style.backgroundColor="pink";
}`},

{name: `const intervalID = setInterval(myCallback, 500, "Parameter 1", "Parameter 2");
function myCallback(a, b) {
  console.log(a);
  console.log(b);
}
setTimeout(function(){clearInterval(intervalID);},20000);
`},

{name: `var ChatGTPlistallfunctions; 
const javascriptFunctions = Object.getOwnPropertyNames(window)
  .filter((prop) => typeof window[prop] === 'function');

console.log(javascriptFunctions);
for(let i=0;i<javascriptFunctions.length;i++){
  console.info(javascriptFunctions[i]);
}
`},

{name: `
const value = 42;

// if statement
if (value === 42) {
  console.log('if statement: Value is 42');
}

// if...else statement
if (value === 42) {
  console.log('if...else statement: Value is 42');
} else {
  console.log('if...else statement: Value is not 42');
}

// if...else if...else statement
if (value === 42) {
  console.log('if...else if...else statement: Value is 42');
} else if (value === 24) {
  console.log('if...else if...else statement: Value is 24');
} else {
  console.log('if...else if...else statement: Value is neither 42 nor 24');
}

// Ternary (conditional) operator
const message = value === 42 ? 'Ternary operator: Value is 42' : 'Ternary operator: Value is not 42';
console.log(message);

// switch statement
switch (value) {
  case 42:
    console.log('switch statement: Value is 42');
    break;
  case 24:
    console.log('switch statement: Value is 24');
    break;
  default:
    console.log('switch statement: Value is neither 42 nor 24');
}
`},

{name: `const stringMethods = [
  "charAt",
  "charCodeAt",
  "concat",
  "endsWith",
  "fromCharCode",
  "includes",
  "indexOf",
  "lastIndexOf",
  "localeCompare",
  "match",
  "normalize",
  "padEnd",
  "padStart",
  "repeat",
  "replace",
  "search",
  "slice",
  "split",
  "startsWith",
  "substr",
  "substring",
  "toLowerCase",
  "toString",
  "toUpperCase",
  "trim",
  "trimEnd",
  "trimLeft",
  "trimRight",
  "trimStart",
  "valueOf",
];`},


{name: `for (let i = 0; i < 1000; i++) {
    // Your code to be executed in each iteration goes here
    console.log("Iteration \${i}",i);
}`},

{name: `let i = 0;
while (i < 10) {
  console.log("i=",i);
  i++
}`},

{name: `// or Logical OR (||)
const a = 3;
const b = -2;
console.log(a > 0 || b > 0); // Expected output: true`},
{name:`Copyright Dirk Luberth Dijkman Bangert Andijk`},

{name: `<script> <\/script>`},
{name: `<script src=" "><\/script>`},
{name: `<style> <\/style>`},
{name: `|| /*(Logical OR)*/`}

];

// create a completer object with a required callback function:
var javascriptCompleter = {
  getCompletions: function(editor, session, pos, prefix, callback) {
    callback(null, javascript.map(function(console) {
      return {
        caption: console.name,
	      value: console.name,
      	meta: "Heaven",
      };
    }));	
  },
   getDocTooltip: function(item) {
        if (!item.docHTML) {
            item.docHTML = [
                'MDN Web Docs<a href="https://developer.mozilla.org/en-US/search?q=',item.caption,'" target="_blank"><br><br><br>', item.caption, '</a><br><br><center><input type="button" style="color:greenyellow;" onclick=\'openinwindow("',item.caption,'")\' value="Open MDN Docs in window"  onmouseover="this.focus()" onmouseout="this.blur()"><br><br></center>',
            ].join("");
        }
    }
};
function openinwindow(what){
  var url='https://developer.mozilla.org/en-US/search?q='+what;
  var urlt= escape(url);
  console.debug("urlt",urlt);
  window.open(url, "mdn", "adressbar=yes,toolbar=yes,scrollbars=yes,resizable=yes,top=300,left=300,width=800,height=600");
}
function openwindow(what){
  window.open(what, "AIChatGPT", "adressbar=yes,toolbar=yes,scrollbars=yes,resizable=yes,top=300,left=300,width=800,height=600");
}
// finally, bind to langTools:
langTools.addCompleter(javascriptCompleter);














	
		editor.setOptions({
			enableBasicAutocompletion: true,
			enableLiveAutocompletion: true,
			enableSnippets: true,
			enableEmmet: true,                 // do not know what emmet is and does
			fixedWidthGutter: false,
			showFoldWidgets: true,
			showInvisibles: true,
      displayIndentGuides: true,
			printMargin: false,
			fontFamily: '',
      fontSize:20,
			tabSize: 2,
      foldStyle: 'markbegin',
      useWorker: true,
      behavioursEnabled: true,          // boolean: true if enable custom behaviours
      wrapBehavioursEnabled: true,      // boolean
      useSoftTabs: false,                 // spaces or tabs i think tabs is better softtabs uses spaces
      scrollPastEnd: .5,
      dragEnabled: true, // boolean: enable dragging
  	});
 editor.renderer.setScrollMargin(200, 200, 0, 0); // Adds 50px padding at the top and bottom


//https://codepen.io/zymawy/pen/XwbxoJ
// All options are set to default value
/*
editor.setOptions({
  // editor options
  selectionStyle: 'line',// "line"|"text"
  highlightActiveLine: true, // boolean
  highlightSelectedWord: true, // boolean
  readOnly: false, // boolean: true if read only
  cursorStyle: 'ace', // "ace"|"slim"|"smooth"|"wide"
  mergeUndoDeltas: true, // false|true|"always"
  behavioursEnabled: true, // boolean: true if enable custom behaviours
  wrapBehavioursEnabled: true, // boolean
  autoScrollEditorIntoView: undefined, // boolean: this is needed if editor is inside scrollable page
  keyboardHandler: null, // function: handle custom keyboard events
  
  // renderer options
  animatedScroll: false, // boolean: true if scroll should be animated
  displayIndentGuides: false, // boolean: true if the indent should be shown. See 'showInvisibles'
  showInvisibles: false, // boolean -> displayIndentGuides: true if show the invisible tabs/spaces in indents
  showPrintMargin: true, // boolean: true if show the vertical print margin
  printMarginColumn: 80, // number: number of columns for vertical print margin
  printMargin: undefined, // boolean | number: showPrintMargin | printMarginColumn
  showGutter: true, // boolean: true if show line gutter
  fadeFoldWidgets: false, // boolean: true if the fold lines should be faded
  showFoldWidgets: true, // boolean: true if the fold lines should be shown ?
  showLineNumbers: true,
  highlightGutterLine: false, // boolean: true if the gutter line should be highlighted
  hScrollBarAlwaysVisible: false, // boolean: true if the horizontal scroll bar should be shown regardless
  vScrollBarAlwaysVisible: false, // boolean: true if the vertical scroll bar should be shown regardless
  fontSize: 12, // number | string: set the font size to this many pixels
  fontFamily: undefined, // string: set the font-family css value
  maxLines: undefined, // number: set the maximum lines possible. This will make the editor height changes
  minLines: undefined, // number: set the minimum lines possible. This will make the editor height changes
  maxPixelHeight: 0, // number -> maxLines: set the maximum height in pixel, when 'maxLines' is defined. 
  scrollPastEnd: 0, // number -> !maxLines: if positive, user can scroll pass the last line and go n * editorHeight more distance 
  fixedWidthGutter: false, // boolean: true if the gutter should be fixed width
  theme: 'ace/theme/textmate', // theme string from ace/theme or custom?
 
  // mouseHandler options
  scrollSpeed: 2, // number: the scroll speed index
  dragDelay: 0, // number: the drag delay before drag starts. it's 150ms for mac by default 
  dragEnabled: true, // boolean: enable dragging
  focusTimout: 0, // number: the focus delay before focus starts.
  tooltipFollowsMouse: true, // boolean: true if the gutter tooltip should follow mouse

  // session options
  firstLineNumber: 1, // number: the line number in first line
  overwrite: false, // boolean
  newLineMode: 'auto', // "auto" | "unix" | "windows"
  useWorker: true, // boolean: true if use web worker for loading scripts
  useSoftTabs: true, // boolean: true if we want to use spaces than tabs
  tabSize: 4, // number
  wrap: false, // boolean | string | number: true/'free' means wrap instead of horizontal scroll, false/'off' means horizontal scroll instead of wrap, and number means number of column before wrap. -1 means wrap at print margin
  indentedSoftWrap: true, // boolean
  foldStyle: 'markbegin', // enum: 'manual'/'markbegin'/'markbeginend'.
  mode: 'ace/mode/html' // string: path to language mode 
  //https://codepen.io/zymawy/pen/XwbxoJ
*/

 editor.setOption(editor.$options.animatedScroll.name, true);
 editor.setBehavioursEnabled(true);
 editor.setDisplayIndentGuides(true);


    HoverLink = require("hoverlink").HoverLink
    editor.hoverLink = new HoverLink(editor);



// click on URL link in editor
editor.hoverLink.on("open", function() {
      // alert("trying to open")
      console.log("trying to open",editor.hoverLink.link.value);

      if(editor.hoverLink.isOpen){
          window.open(editor.hoverLink.link.value);
      }
      console.log("this.link",editor.hoverLink.isOpen);
})


editor.execCommand('find');         // create the search find replace popup
                                    // maybe a little delay 
                                    // before make it draggable
                                    // think draggable wants to add code to div class="ace_search"
setTimeout(function(){
    // https://jqueryui.com/draggable/
    $( ".ace_search" ).draggable();  // after an edit the search / replace popup is draggable
}, 250);






		new AceScrollbars(editor);





// minimapeditor
var myTimeout;  // for update timeout minimap
// test maybe better for plugin alike code
editor.container.insertAdjacentHTML("beforeend", "<div id=\"minimapeditor\" class=\"minimapeditor\" onmouseover=\'ace.edit(\"minimapeditor\").focus();\'></div>")


//////////////////////////////////////////////////////////
// minimapeditor
//////////////////////////////////////////////////////////
  var minimapeditor = ace.edit("minimapeditor");
  minimapeditor.session.setMode("ace/mode/html");
  minimapeditor.setTheme("ace/theme/vibrant_ink");
  minimapeditor.setFontSize(3.0);
  minimapeditor.setShowPrintMargin(false);
  minimapeditor.renderer.setShowGutter(false);
  minimapeditor.setReadOnly(true);
  minimapeditor.renderer.setOption('showLineNumbers', false);
  editor.setOption("showPrintMargin", false);

  minimapeditor.setValue(editor.getSession().getValue());
  //minimapeditor.selection.clearSelection();
  //minimapeditor.setOption(minimapeditor.$options.animatedScroll.name, true);
  //minimapeditor.setAutoScrollEditorIntoView(true)


// get linenumeber on minimap mouseclick
minimapeditor.on('mousedown', () => {
    // mouseup works better?
});



// get linenumeber on minimap mouseup, for set main editor cursor position
minimapeditor.on('mouseup', () => {       // var cursor = minimapeditor.getCursorPosition();
    var cursorrow = minimapeditor.getCursorPosition().row;
    var cursorcolumn = minimapeditor.getCursorPosition().column;
    // var cursorPos = $scope.editor.getCursorPosition()

    // move cursorr big editor to cursor rom clickpos minimapeditor
    ace.edit("editor").gotoLine(cursorrow,cursorcolumn);
    ace.edit("editor").moveCursorTo(cursorrow,cursorcolumn);
    // console.log("getcursor row",cursorrow );
    // minimapeditor.selection.clearSelection();

    minimapeditor.scrollToLine(cursorrow, true, true, function () {});
    ace.edit("minimapeditor").moveCursorTo(editor.getCursorPosition());
    ace.edit("minimapeditor").gotoLine(cursorrow,cursorcolumn);
    minimapeditor.setAutoScrollEditorIntoView(true)

     minimapeditor.session.removeMarker(marker);
     // marker=minimapeditor.session.addMarker(new Range(editor.renderer.getFirstVisibleRow(), 0, editor.renderer.getLastVisibleRow(), 0), "ace_active-line", "fullLine");

});


//https://stackoverflow.com/questions/63892312/ace-editor-get-selected-word-after-double-click
editor.on("dblclick", function () {  //select on 
    setTimeout(() => {
        // could return a string of all sellected words on a newline split into array
        var selected_word = editor.getCopyText().split(/\r?\n/)[0];
        //editor.getSelectedText().split(/\r?\n/)[0];
        console.log("editor.getSelectedText()",editor.getSelectedText().split(/\r?\n/)[0]); 
        console.log("editor.getCopyText()",editor.getCopyText().split(/\r?\n/)[0]);
        editor.findAll(editor.getSelectedText().split(/\r?\n/)[0]);
        minimapeditor.findAll(editor.getSelectedText().split(/\r?\n/)[0]);

        document.querySelector(".ace_search_field").value=editor.getSelectedText().split(/\r?\n/)[0]; 
   
    }, 250);
});

editor.on('mousedown', () => {
     //minimapeditor.selection.clearSelection();
     minimapeditor.selection.selectLine();
        //if (document.querySelector(".ace_search_field").value !=""){
    //editor.findAll(document.querySelector(".ace_search_field").value);
    //minimapeditor.findAll(document.querySelector(".ace_search_field").value);
   //} 
   });

var marker; //gray select on minimap

editor.session.on("changeScrollTop", function() {

    var s=editor.renderer.getFirstVisibleRow()
    var e=editor.renderer.getLastVisibleRow()
    var m = s+((e-s)/2);    // center of editor

    minimapeditor.scrollToLine(m, true, true, function () {});
    minimapeditor.moveCursorTo(m);
    minimapeditor.gotoLine(m);

 minimapeditor.session.removeMarker(marker);  // gray selection on minimap
 marker=minimapeditor.session.addMarker(new Range(s, 0, e, 0), "ace_active-line", "fullLine");
  if(editor.getSelectedText().split(/\r?\n/)[0] != ""){
      minimapeditor.findAll(editor.getSelectedText().split(/\r?\n/)[0]);
  }
})



// on change main big editor change content minimap editor 5 sec delay of no change
editor.getSession().on('change', function () {

    // timeout here?
    // update minimap after 5 seconds no change (update every keypres makes editor slow)
    clearTimeout(myTimeout); // clear if new change
    myTimeout = setTimeout(function(){
        minimapeditor.setValue(editor.getSession().getValue());
        minimapeditor.selection.clearSelection();
    }, 1000);

    ace.edit("editor").focus(); // To focus the ace editor
    ace.edit("editor").renderer.$cursorLayer.showCursor();
//$('.ace_scrollbar.ace_scrollbar-v').style.display = "none";
//$(".ace_scrollbar.ace_scrollbar-v").eq(1).setAttribute('style', 'overscroll:hidden;');
if(document.querySelector(".ace_search_field").value !=""){
    // preventScroll
  // ace.edit("editor").findAll(document.querySelector(".ace_search_field").value);
}

 
//   if (document.querySelector(".ace_search_field").value !=""){
//    editor.findAll(document.querySelector(".ace_search_field").value);
//    minimapeditor.findAll(document.querySelector(".ace_search_field").value);
//   } 

});





/////////////////////////////// end minimap ?





  

// https://www.w3schools.com/howto/howto_js_toggle_hide_show.asp
function showhideminimap() {
  var x = id("minimapeditor");
  if (x.style.display === "none") {
    x.style.display = "block";
    id("minimapbutton").value="Hide MiniMap"
  } else {
    x.style.display = "none";
    id("minimapbutton").value="Show MiniMap"
  }
}
 
function showhidepreview() {

  if (id("editor").style.width === "100%") {
    id("editor").style.width = "75%";
    id("previewbutton").value="Hide Preview";
  } else {
    id("editor").style.width = "100%";
    id("previewbutton").value="Show Preview";
  }
  
}




function toggleFullScreen() {
  if (top.location!= self.location) {
    top.location = self.location.href;
  }
  if (window.location !== window.top.location) {
    window.top.location = window.location;
  }
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
  } else {
    if (document.exitFullscreen) {
      document.exitFullscreen();
    }
  }
}

var onoff=1;
function togglelinenumbers() {
  if (onoff==1) {
      //editor.renderer.setOption('showLineNumbers', false);
      //editor.renderer.setShowGutter(false);
      //const nodeList = document.querySelectorAll(".ace_gutter-cell");
      //for (let i = 0; i < nodeList.length; i++) {
          //nodeList[i].innerHTML = "" // removes linenumbes from gutter but cursor gets strange on typing
          //nodeList[i].innerText = "";// removes linenumbes from gutter but cursor gets strange on typing
      //}
      // cannot find how they turn off linenumbers in ace settings menu
      //document.querySelector(".ace_gutter").style.width = "20px";//hides linumbers, shows icons, but not folding thingy
      editor.setOption('showLineNumbers', false);
      id("linenmbrsbutton").value="Show LineNumbers";
      onoff=0;
  }else{
      //editor.renderer.setOption('showLineNumbers', false);
      //editor.renderer.setshowLineNumbers(false);
      //editor.renderer.setShowGutter(true);
      //document.querySelector(".ace_gutter-cell ").innerhtml="";      
      //document.querySelector(".ace_gutter").style.width = "55px";
      //editor.renderer.setOption.showLineNumbers(false);
       editor.setOption('showLineNumbers', true);
       id("linenmbrsbutton").value="Hide LineNumbers";
      onoff=1;
  }
}
      
var ionoff=1;
function toggleinvisibles() {
  if (ionoff==1) {
      editor.setOption('showInvisibles', false);
      id("invisiblesbutton").value="Show Invisibles";
      ionoff=0;
  }else{
       editor.setOption('showInvisibles', true);
       id("invisiblesbutton").value="Hide Invisibles";
      ionoff=1;
  }
}



// save part of https://codepen.io/8354801/pen/OeOBXm
function save() {
  download('Ace_Seventh_Heaven.html', editor.getValue());
}

// download part of https://codepen.io/8354801/pen/OeOBXm
function download(filename, text) {
      var element = document.createElement('a');
      element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
      // get text value name is set by openfile
      filename=document.querySelector("input.text").value;
      element.setAttribute('download', filename);

      element.style.display = 'none';
      document.body.appendChild(element);

      element.click();

      document.body.removeChild(element);
}


// https://plnkr.co/edit/GCLwKqNGqi4R2Fnr?preview


  function openCode(files) {
        var file = files[0];
        if (!file) return;
        var modelist = ace.require('ace/ext/modelist');
        var modeName = modelist.getModeForPath(file.name).mode;
        editor.session.setMode(modeName);
        minimapeditor.session.setMode(modeName);
        id('ace-mode').value=modeName.replace("ace/mode/",""); // not correct mode select  blanks
console.log("modeName ",modeName.replace("ace/mode/",""));

        console.log("file.name",file.name);
        console.log("change page title",file.name+" Ace Seventh Heaven");
        document.querySelector('title').textContent = file.name+" ________ The AfterWorld, Editor With AI ________ ";
        // silly set filename text field for save to disk filename
        document.querySelector("input.text").value=file.name;      

        reader = new FileReader();
        reader.onload = function () {
          editor.session.setValue(reader.result);
        };
        reader.readAsText(file);


      }



    id('ace-theme').addEventListener('change', function(e) {
      console.log((id('ace-theme').value).toLowerCase());
      e.preventDefault();
      ace.edit("editor").setTheme('' + (id('ace-theme').value).toLowerCase());
      ace.edit("minimapeditor").setTheme('' + (id('ace-theme').value).toLowerCase());
    });


    id('ace-mode').addEventListener('change', function(e) {
      console.log((id('ace-mode').value).toLowerCase());
      e.preventDefault();
      ace.edit("editor").getSession().setMode('ace/mode/' + (id('ace-mode').value).toLowerCase());
    });


function Update_HTML_Preview(){	
	
  $("#preview").empty();

	
	var code = editor.getValue();
	
	var iframe = document.createElement('iframe');
	
	var preview = id('preview');
	var content = code + `
<script src="https://ldijkman.github.io/Ace_Seventh_Heaven/console.js"><\/script>
` ;

	preview.appendChild(iframe);

	iframe.contentWindow.document.open('text/htmlreplace');
	iframe.contentWindow.document.write(content);
	iframe.contentWindow.document.close();
	
	 //$("#preview").innerHTML=content;

}

Update_HTML_Preview();

var timeout;
var emarker;
var emarkers;
$('.ace_search_field').on('keydown', function(e){
   setTimeout(markit, 2000);
});


function markit() {

var markercolor;
    var darkorlight=document.querySelector('#ace-theme option:checked').parentElement.label;
     console.log("dark or light ",darkorlight);
     if(darkorlight=="Dark"){
        markercolor="yellowborder";
     }else{
       markercolor="purpleborder";
     }
 /*  // get keycode of current keypress event
    var code = (e.keyCode || e.which);

    // do nothing if it's an arrow key
    if(code == 37 || code == 38 || code == 39 || code == 40) {
        return;
    }

    // do normal behaviour for any other key
    $('#search-items #autocom').fadeIn();
    */
 // get editor find search text
var text=document.querySelector(".ace_search_field").value;
  //console.log("search",text);

 //editor.session.removeMarker(emarker);
 //minimapeditor.session.removeMarker(emarkers);



  //minimapeditor.find(text);
  //https://codepen.io/ldijkman/pen/gOZjGVL
            //var range= 
            minimapeditor.findAll(text); // findAll finds more but clears the custom scrollbar 
         
            editor.findAll(text);  // findAll finds more but clears the custom scrollbar 
           
           
           
          //console.log("findall : ",range)
          //var selectarray=editor.getSelection().getAllRanges();
          //console.log("editor.getSelection().getAllRanges()",selectarray);
            //console.log("editor.getSelection().getAllRanges().length",editor.getSelection().getAllRanges().length);
 /*    
      for (let i = 0; i < editor.getSelection().getAllRanges().length ; i=i+1) {

           // console.log("line",editor.getSelection().ranges[i].start.row);
           // console.log("start",editor.getSelection().ranges[i].start.column);
           // console.log("end",editor.getSelection().ranges[i].end.column);
            var line=editor.getSelection().ranges[i].start.row;
            var start=editor.getSelection().ranges[i].start.column;
            var end=editor.getSelection().ranges[i].end.column;
  
            emarker=editor.session.addMarker(new Range(line,start,line,end), markercolor, "text");    
            emarkers=minimapeditor.session.addMarker(new Range(line,start,line,end), markercolor, "text"); 
      } 

document.querySelectorAll(".yellowborder").forEach(function(el) {
   el.style.border = "2px solid red";
});
 */
}




$("#editor").on('keyup', function(e) {
 
console.log("keyup");

	  var code = (e.keyCode || e.which);

    // do nothing if it's an arrow key
    if(code == 37 || code == 38 || code == 39 || code == 40) {
        return;
    }

	//console.log("yea");

	if(timeout) {
		clearTimeout(timeout);
		timeout = null;
	}

	timeout = setTimeout(Update_HTML_Preview, 2500)
	
});

///////////////////////////////////////////////////////////////////////////
// arduino alike map function == Re-maps a number from one range to another.
// https://www.arduino.cc/reference/en/language/functions/math/map/
// https://stackoverflow.com/questions/5649803/remap-or-map-function-in-javascript
// scale range 1 into range2 bar range to 0 to 1440 minute range
// or
// scale a minutevalue in range 0 to 1440 minutes to 0% to 100%,  used for left and width of timeslot divs
///////////////////////////////////////////////////////////////////////////////
function map_range(value, low1, high1, low2, high2) {
    return (low2 + (high2 - low2) * (value - low1) / (high1 - low1)).toFixed(3);   // to 3 decimals, Math.round did not scale right
}

// https://www.javascripttutorial.net/dom/css/add-styles-to-an-element/
function css(element, style) {
    for (const property in style)
        element.style[property] = style[property];
}

document.addEventListener("DOMContentLoaded", () => {
    editor.findAll("function");
    minimapeditor.findAll("function");
    document.querySelector(".ace_search_field").value="function"; 
    
    // minimapeditor.find("function");
    // https://www.javascripttutorial.net/dom/css/add-styles-to-an-element/
    const note = document.querySelector('.ace_scrollbar.ace_scrollbar-v');
    css(note, {
      //'background-color': 'yellow',
      //width: '10px',
      overflow:'hidden'      // remove the verticalscrollbar from behind the custom scrollbar
    });                      // but live the minimap vertical scrollbar intact  

    const notetwo = document.querySelectorAll('.ace_scrollbar.ace_scrollbar-v')[1];
    css(notetwo, {
       width: '8px'
      //'background-color': '',
      // color: 'red'             // i do not know maybe make scrollbar slider guide transparent
      //overflow:'hidden'      // remove the verticalscrollbar from behind the custom scrollbar
    }); 

  toggleFullScreen();
});
  

// moved to ace scrollbar js

editor.getSession().on("changeAnnotation", function() {
  //var annotations = session.getAnnotations()||[], i = len = annotations.length;
  // while (i--) {
  //   if(/doctype first\. Expected/.test(annotations[i].text)) {
  //     annotations.splice(i, 1);
  //  }
  //}
  // if(len>annotations.length) {
  //  session.setAnnotations(annotations);
  // }

  var  errormessage="";
  //var Range = ace.require("ace/range").Range;
  errormessage += " "+editor.getSession().getAnnotations().length+" Annotations\r\n"+"Click to go to next Error or Warning in Editor\r\n\r\n";
  //  resizeScroll(); // redraw vertical scrollbar on error changes
  for (let i = 0; i < editor.getSession().getAnnotations().length; i=i+1) {
      //console.log("errors/warnings on line ",editor.getSession().getAnnotations()[i].row);
      errormessage += " "+editor.getSession().getAnnotations()[i].row+1 +"  "+ editor.getSession().getAnnotations()[i].type +"  "+ editor.getSession().getAnnotations()[i].text+"\r\n";
      //var mymarker=minimapeditor.addMarker(new Range((editor.getSession().getAnnotations()[i].row+1), 0, (editor.getSession().getAnnotations()[i].row+1), 60), "red", "text");
  }
  errorbutton.title=errormessage;
});







var errorpointer=0;

function nexterror() {

    var len = editor.getSession().getAnnotations().length;
    document.getElementById("errorbuttom"),value=len;
    if (errorpointer >= len){
        errorpointer=0;
    }

    editor.scrollToLine(editor.getSession().getAnnotations()[errorpointer].row+1, true, true, function () {});
    editor.moveCursorTo(editor.getSession().getAnnotations()[errorpointer].row)+1;
    editor.gotoLine(editor.getSession().getAnnotations()[errorpointer].row+1);

    errorpointer++;

}







  const minimapmarker=[];
  const editormarker=[];
var len="";

function doiteverysecond () {

  //editor.findAll("luberth");

    //    console.log("editor.getSelectedText()",editor.getSelectedText().split(/\r?\n/)[0]); 
    //    console.log("editor.getCopyText()",editor.getCopyText().split(/\r?\n/)[0]);

// https://github.com/ajaxorg/ace/issues/1199
//console.log("color",getComputedStyle(editor.renderer.scroller).backgroundColor);
//console.log("guttercolor ",document.querySelector(".ace_gutter").style.backgroundColor);

//get warnings errors?
//console.log("editor.getSession().getAnnotations()",editor.getSession().getAnnotations());


/*console.log("editor.getSession().getAnnotations().length",editor.getSession().getAnnotations().length);
for (let i = 0; i < editor.getSession().getAnnotations().length; i=i+1) {
console.log("errors/warnings on line ",editor.getSession().getAnnotations()[i].row);
}*/

if (editor.getSession().getAnnotations().length=="0") {
  errorbutton.style.color="greenyellow";
}else{
  errorbutton.style.color="rgb(255,40,0)";
}

    var len = editor.getSession().getAnnotations().length;
    document.getElementById("errorbutton").value=""+len;

//if(len!=editor.getSession().getAnnotations().length){
 //   resizeScroll(); // redraw vertical scrollbar on error changes
//}
//len=editor.getSession().getAnnotations().length;


  //var Range = ace.require("ace/range").Range;


for (let i = 0; i < editormarker.length; i=i+1) {
        minimapeditor.session.removeMarker(minimapmarker[i]);
        editor.session.removeMarker(editormarker[i]);
}
  for (let i = 0; i < editor.getSession().getAnnotations().length; i=i+1) {
       if(editor.getSession().getAnnotations()[i].type=="error"){
          minimapmarker[i]= minimapeditor.session.addMarker(new Range(editor.getSession().getAnnotations()[i].row, 0, editor.getSession().getAnnotations()[i].row, 60), "errormarker", "fullLine");
          editormarker[i]=editor.session.addMarker(new Range(editor.getSession().getAnnotations()[i].row, 0, editor.getSession().getAnnotations()[i].row, 60), "errormarker", "fullLine");
       }else{
          minimapmarker[i]= minimapeditor.session.addMarker(new Range(editor.getSession().getAnnotations()[i].row, 0, editor.getSession().getAnnotations()[i].row, 60), "warningmarker", "fullLine");
          editormarker[i]=editor.session.addMarker(new Range(editor.getSession().getAnnotations()[i].row, 0, editor.getSession().getAnnotations()[i].row, 60), "warningmarker", "fullLine");
       }
    }
   // minimapeditor.setValue(editor.getSession().getValue());
//ace.edit("minimapeditor").setFontSize(parseFloat(ace.edit("minimapeditor").getFontSize()));

    var darkorlight=document.querySelector('#ace-theme option:checked').parentElement.label;
     //console.log("Theme optgroup = ",darkorlight);
     if(darkorlight=="Dark"){
        // dark
        // https://github.com/ajaxorg/ace/issues/1199
        document.querySelector(".ace_scroll-v").style.backgroundColor=getComputedStyle(editor.renderer.scroller).backgroundColor; 
     }else{
       // bright
       // https://github.com/ajaxorg/ace/issues/1199
       document.querySelector(".ace_scroll-v").style.backgroundColor=getComputedStyle(editor.renderer.scroller).backgroundColor; 
     }

document.getElementById("version").innerHTML = ' &nbsp;&nbsp;<a href="https://github.com/ajaxorg/ace" target="ace">Ace Version: ' + ace.version+'</a>';


// beautify options
//console.log("tabsize",document.getElementById("tabsize").value);
//console.log("max-preserve-newlines",document.getElementById("max-preserve-newlines").value);
//console.log("wrap-line-length",document.getElementById("wrap-line-length").value);
//console.log("brace-style",document.getElementById("brace-style").value);
//console.log("indent-scripts",document.getElementById("indent-scripts").value);


/*var roww = editor.getCursorPosition().row;
var column=editor.getCursorPosition().column;
//console.log("cursorpos",cursorpos);
editor.setOption("enableMultiselect", false);
var range = editor.findAll('ldijk',{
    wrap: false,
    caseSensitive: false, 
    wholeWord: false,
    regExp: false,
    preventScroll: true // do not change selection
})
//range.start.column = 0
//range.end.column = Number.MAX_VALUE
//editor.session.replace(range, "x" + editor.session.getLine(range.start.row) + "x")
//console.log("cursorpos",cursorpos);
editor.selection.setRange(range);
 
  editor.gotoLine(roww, column);  
  editor.moveCursorTo(roww,column);
*/

//download_to_textbox("https://run.plnkr.co/plunks/TMDzQALQgACruCYz/");
//download_to_textbox("https://raw.githubusercontent.com/ldijkman/Ace_Seventh_Heaven/main/docs/Hell.html");

}
 setInterval(doiteverysecond, 2500); // Milliseconds  call function doiteverysecond() every second



function download_to_textbox(url) {
        $.get(url, null, function (data) {
            //el.val(data);
            editor.setValue(data);
        }, "text");
    }


function play() { 
		var beepsound = new Audio( 'https://www.myinstants.com/media/sounds/wuh-oh.mp3'); 

    beepsound.addEventListener("canplaythrough", (event) => {
        beepsound.play()
    });
	} 


</script>


<textarea rows=5 cols ="55" hidden>
4 7th Heaven Editor?<br>
<a href="https://ldijkman.github.io/Ace_Seventh_Heaven/Seventh_Heaven.html" target="7th_Heaven">https://ldijkman.github.io/Ace_Seventh_Heaven/Seventh_Heaven.html</a><br>
</textarea>
 

 <script>
    // https://web.dev/patterns/files/save-a-file/#using-the-file-system-access-apis-showsavefilepicker-method
    // https://web.dev/patterns/files/save-a-file/demo.html
    // https://plnkr.co/edit/oOmxxNPfJlkjIh9i
    // https://github.com/GoogleChromeLabs/browser-fs-access	 
    // https://googlechromelabs.github.io/browser-fs-access/demo/



     var textarea = editor.getValue(),
      textInput = document.querySelector("input.text"),
      textButton = document.querySelector(".savebutton"),
      img = document.querySelector("img"),
      imgInput = document.querySelector("input.img"),
      imgButton = document.querySelector("button.img"),
      saveFile = async (e, t) => {
        if ("showSaveFilePicker" in window && (() => {
            try {
              return window.self === window.top
            } catch {
              return !1
            }
          })()) try {
          const n = await showSaveFilePicker({
              suggestedName: t
            }),
            a = await n.createWritable();
          return await a.write(e), void await a.close()
        } catch (e) {
          return void("AbortError" !== e.name && console.error(e.name, e.message))
        }
        const n = URL.createObjectURL(e),
        a = document.createElement("a");
        a.href = n,
        a.download = t,
        a.style.display = "none",
        document.body.append(a), a.click(),
        setTimeout((() => {
          URL.revokeObjectURL(n), a.remove()
        }), 1e3)
      };
    textButton.addEventListener("click", (async () => {
      const e = new Blob([editor.getValue()], {
        type: "text/plain"
      });
      await saveFile(e, textInput.value)
    })), imgButton.addEventListener("click", (async () => {
      const e = await fetch(img.src).then((e => e.blob()));
      await saveFile(e, imgInput.value)
    }));
    // https://web.dev/patterns/files/save-a-file/#using-the-file-system-access-apis-showsavefilepicker-method
    // https://web.dev/patterns/files/save-a-file/demo.html
    // https://plnkr.co/edit/oOmxxNPfJlkjIh9i
    // https://github.com/GoogleChromeLabs/browser-fs-access	 
    // https://googlechromelabs.github.io/browser-fs-access/demo/	 
   
   







  </script>






 <!-- hitwebcounter Code START -->
<a href="https://www.hitwebcounter.com" target="_blank" >
<img src="https://hitwebcounter.com/counter/counter.php?page=9338682&style=0005&nbdigits=6&type=page&initCount=0" title="i think this is a safe Counter Widget" Alt="Visit counter For Websites"   border="0" style="float:right;padding:5x;"/></a>                                    
            
            
            
            
            
        <div id="time" style="position: fixed; bottom: 1em; right: 1em;background:lightgray;z-index:11000;">  
          <!--<button onclick="showhideabout()" style="border-color:green; color:green;"><b>?</b></button>-->
          <script>
            setInterval(function () {

             const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
             const days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
              const d = new Date();
              let month = months[d.getMonth()];
              let day = days[d.getDay()];
              //document.getElementById("demo").innerHTML = day;

              const event = new Date();
              document.getElementById("time").innerHTML = (event.toLocaleString());
            }, 1000);

          </script>
          <script>
            // session storage https://plnkr.co/edit/TMDzQALQgACruCYz
            const fruits = ["Banana", "Orange", "Apple", "Mango","","","",""];
            setInterval(function () {
            fruits.shift();
            var test=new Date().getSeconds();
            //fruits.push(test);document.getElementById("demo").innerHTML = fruits;
            }, 1000);

            // session storage https://plnkr.co/edit/TMDzQALQgACruCYz
            </script>
        </div>              
                          
                          
                           https://youtu.be/l9wejBgCiT4

               <script>


      // https://codepen.io/louisr/pen/xZwJLx
      // https://github.com/bahmutov/console-log-div 
      //      changes Luberth https://plnkr.co/edit/AufqNkQe4InMuU8v
      //      test for https://ldijkman.github.io/Ace_Seventh_Heaven/Hell.html 
      //    more? https://stackoverflow.com/questions/13815640/a-proper-wrapper-for-console-log-with-correct-line-number

        //const stylesheet = '#console-log-div{min-height:55px;max-height:200px;width:600px;top:200px;left:100px;margin:1px;padding:1px 0 0;font-family:"Input Mono",monospace;font-weight:400;font-size:.8em;line-height:1em;color:rgba(0,0,0,.61);box-shadow:inset 0 0 2px rgba(0,0,0,.1);background-color:#ebebeb;overflow:auto;overscroll-behavior-y:auto;transform:scale(100%);z-index:50000}#console-log-div #legend,#console-log-div .log-row,#console-log-div td{padding:1px 0 8px;text-indent:1px;z-index:50000}#console-log-div #legend{padding-bottom:12px;font-size:1.2em;cursor:move;z-index:50000}#console-log-div .log-row:nth-child(odd){background:rgba(0,0,0,.1);z-index:50000}#console-log-div thead{background:rgba(0,0,0,.2)}';
        //document.adoptedStyleSheets = [stylesheet];
/*
      var etype = "log";

      (function initConsoleLogDiv() {
        'use strict';


        if (console.log.toDiv) {
          return;
        }

        function toString(x) {
          return typeof x === 'string' ? x : JSON.stringify(x);
        }

        var log = console.log.bind(console);
        var error = console.error.bind(console);
        var warn = console.warn.bind(console);
        var table = console.table ? console.table.bind(console) : null;
        var consoleId = 'console-log-div';

        // Create the Console Div container.
        function createOuterElement(id) {
          var outer = document.getElementById(id);
          if (!outer) {
            outer = document.createElement('fieldset');
            outer.id = id;
            document.body.appendChild(outer);
          }
          var style = outer.style;
          return outer;
        }
        // Create the logging div and adornments.
        var logTo = (function createLogDiv() {

          var outer = createOuterElement(consoleId);
          var caption = document.createTextNode('Console Output');
          var legend = document.createElement('div');
          legend.id = "legend";
          legend.appendChild(caption);
          outer.appendChild(legend);

          document.getElementById("legend").innerHTML = 'Console Editor log, Drag Me. <input type="button" onclick=\'document.getElementById("console-log-text").innerHTML="Cleared Console";\' value="Clear" title="Empty Console!"> <input type="button" value="hide" title="Not yet!">';

          var div = document.createElement('div');
          div.id = 'console-log-text';

          outer.appendChild(div);
          return div;
        }());

        function printToDiv() {
          var msg = Array.prototype.slice.call(arguments, 0)
            .map(toString)
            .join(' ');
          var item = document.createElement('div');
          item.classList.add('log-row');
          item.textContent = msg;

          //logTo.appendChild(item);               // new logs on bottom
          logTo.prepend(item);                    // i want new logs on top
          
                              // wait for element creation
          //setTimeout(function () {
          const nodeList = document.querySelectorAll(".log-row");
          if (etype == "log") {                        // change text color
            nodeList[0].style.color = "gray";
          }
          if (etype == "warn") {
            nodeList[0].style.color = "orange";
          }
          if (etype == "errorr") {
            nodeList[0].style.color = "red";
          }
          if (etype == "exception") {
            nodeList[0].style.color = "red";
          }


          // }, 5);
        }

        function logWithCopy() {
          var ele = document.getElementById('console-log-div');
          setDarkLight(ele);
          log.apply(null, arguments);
          etype = "log";
          printToDiv.apply(null, arguments);
        }

        console.log = logWithCopy;
        console.log.toDiv = true;



        console.error = function errorWithCopy() {
          error.apply(null, arguments);
          var args = Array.prototype.slice.call(arguments, 0);
          args.unshift('ERROR:');
          etype = "errorr";
          printToDiv.apply(null, args);
        };

        console.warn = function logWarning() {
          warn.apply(null, arguments);
          var args = Array.prototype.slice.call(arguments, 0);
          args.unshift('WARNING:');
          etype = "warn";
          printToDiv.apply(null, args);
        };

        function printTable(objArr, keys) {

          var numCols = keys.length;
          var len = objArr.length;
          var $table = document.createElement('table');
          $table.style.width = '100%';
          $table.setAttribute('border', '1');
          var $head = document.createElement('thead');
          var $tdata = document.createElement('td');
          $tdata.innerHTML = 'Index';
          $head.appendChild($tdata);

          for (var k = 0; k < numCols; k++) {
            $tdata = document.createElement('td');
            $tdata.innerHTML = keys[k];
            $head.appendChild($tdata);
          }
          $table.appendChild($head);

          for (var i = 0; i < len; i++) {
            var $line = document.createElement('tr');
            $tdata = document.createElement('td');
            $tdata.innerHTML = i;
            $line.appendChild($tdata);

            for (var j = 0; j < numCols; j++) {
              $tdata = document.createElement('td');
              $tdata.innerHTML = objArr[i][keys[j]];
              $line.appendChild($tdata);
            }
            $table.appendChild($line);
          }
          var div = document.getElementById('console-log-text');
          div.appendChild($table);

        }

        console.table = function logTable() {
          if (typeof table === 'function') {
            table.apply(null, arguments);
          }

          var objArr = arguments[0];
          var keys;

          if (typeof objArr[0] !== 'undefined') {
            keys = Object.keys(objArr[0]);
          }
          printTable(objArr, keys);
        };

        window.addEventListener('error', function (err) {
           etype="exception";
          printToDiv('EXCEPTION:', err.message + '\n  ' + err.filename, err.lineno + ':' + err.colno);
        });

        //   Detect dark or light colors.

        function setDarkLight(element) {
          var color = window.getComputedStyle(element, null).backgroundColor;
          if (isDark(color)) {
            element.style.color = "rgba(255,255,255,1)";
          } else {
            element.style.color = "rgba(0,0,0,.61)";
          }
        }

        function isDark(color) {
          var match = /rgb\((\d+).*?(\d+).*?(\d+)\)/.exec(color);
          return parseFloat(match[1]) +
            parseFloat(match[2]) +
            parseFloat(match[3]) <
            3 * 256 / 2; // r+g+b should be less than half of max (3 * 256)
        }
      }());


      // https://codepen.io/louisr/pen/xZwJLx
      // https://github.com/bahmutov/console-log-div 
      //      changes Luberth https://plnkr.co/edit/AufqNkQe4InMuU8v
      //      test for https://ldijkman.github.io/Ace_Seventh_Heaven/Hell.html 
      //    more? https://stackoverflow.com/questions/13815640/a-proper-wrapper-for-console-log-with-correct-line-number

           setTimeout(function () {
          // https://jqueryui.com/draggable/
          $("#console-log-div").draggable(); // after an edit the search / replace popup is draggable
        }, 250);

   
    //           <\/script>  

*/

 
  // https://stackoverflow.com/questions/8960193/how-to-make-html-element-resizable-using-pure-javascript



// wait for the page loaded, and make console draggable 
document.addEventListener("DOMContentLoaded",
function (event) {

           setTimeout(function () { var element = document.querySelector(".cont_ai_ner")
AImakeResizable(element,16,16)
    console.info("AI Code Assistant, Running, Making it Draggable.");
    make_AI_draggable(); // https://www.w3schools.com/howto/howto_js_draggable.asp


 var element = document.querySelector(".cont_ai_ner")
AImakeResizable(element,16,16)
  }, 2500);
    console.info("Ok, You can Drag it now!.");
    console.info("& Wow!, Resize on Borders and Corners!.");
     console.debug('ai => RosyBrown');
});





function AImakeResizable(element, minW = 500, minH = 500, size = 10)
{ var element = document.querySelector(".cont_ai_ner")

    const top = document.createElement('div');
    top.style.width = '100%';
    top.style.height = size + 'px';
    top.style.backgroundColor = 'transparent';
    top.style.position = 'absolute';
    top.style.top = - (size/2) + 'px';
    top.style.left = '0px';
    top.style.cursor = 'n-resize';

    top.addEventListener('mousedown',resizeYNegative())

    element.appendChild(top);

    const bottom = document.createElement('div');
    bottom.style.width = '100%';
    bottom.style.height = size + 'px';
    bottom.style.backgroundColor = 'transparent';
    bottom.style.position = 'absolute';
    bottom.style.bottom = - (size/2) + 'px';
    bottom.style.left = '0px';
    bottom.style.cursor = 'n-resize';

    bottom.addEventListener('mousedown',resizeYPositive())

    element.appendChild(bottom);

    const left = document.createElement('div');
    left.style.width = size + 'px';
    left.style.height = '100%';
    left.style.backgroundColor = 'transparent';
    left.style.position = 'absolute';
    left.style.top = '0px';
    left.style.left = - (size/2) + 'px';
    left.style.cursor = 'e-resize';

    left.addEventListener('mousedown',resizeXNegative())

    element.appendChild(left);

    const right = document.createElement('div');
    right.style.width = size + 'px';
    right.style.height = '100%';
    right.style.backgroundColor = 'transparent';
    right.style.position = 'absolute';
    right.style.top = '0px';
    right.style.right = - (size/2) + 'px';
    right.style.cursor = 'e-resize';

    right.addEventListener('mousedown',resizeXPositive())

    element.appendChild(right);


    const corner1 = document.createElement('div');
    corner1.style.width = size + 'px';
    corner1.style.height = size + 'px';
    corner1.style.backgroundColor = 'transparent';
    corner1.style.position = 'absolute';
    corner1.style.top = - (size/2) + 'px';
    corner1.style.left = - (size/2) + 'px';
    corner1.style.cursor = 'nw-resize';

    corner1.addEventListener('mousedown',resizeXNegative())
    corner1.addEventListener('mousedown',resizeYNegative())
    
    element.appendChild(corner1);

    const corner2 = document.createElement('div');
    corner2.style.width = size + 'px';
    corner2.style.height = size + 'px';
    corner2.style.backgroundColor = 'transparent';
    corner2.style.position = 'absolute';
    corner2.style.top = - (size/2) + 'px';
    corner2.style.right = - (size/2) + 'px';
    corner2.style.cursor = 'ne-resize';

    corner2.addEventListener('mousedown',resizeXPositive())
    corner2.addEventListener('mousedown',resizeYNegative())

    element.appendChild(corner2);

    const corner3 = document.createElement('div');
    corner3.style.width = size + 'px';
    corner3.style.height = size + 'px';
    corner3.style.backgroundColor = 'transparent';
    corner3.style.position = 'absolute';
    corner3.style.bottom = - (size/2) + 'px';
    corner3.style.left = - (size/2) + 'px';
    corner3.style.cursor = 'sw-resize';

    corner3.addEventListener('mousedown',resizeXNegative())
    corner3.addEventListener('mousedown',resizeYPositive())

    element.appendChild(corner3);

    const corner4 = document.createElement('div');
    corner4.style.width = size + 'px';
    corner4.style.height = size + 'px';
    corner4.style.backgroundColor = 'transparent';
    corner4.style.position = 'absolute';
    corner4.style.bottom = - (size/2) + 'px';
    corner4.style.right = - (size/2) + 'px';
    corner4.style.cursor = 'se-resize';

    corner4.addEventListener('mousedown',resizeXPositive())
    corner4.addEventListener('mousedown',resizeYPositive())

    element.appendChild(corner4);
    
    function get_int_style(key)
    {
        return parseInt(window.getComputedStyle(element).getPropertyValue(key));
    }

    function resizeXPositive()
    {
        let offsetX
        function AIdragMouseDown(e) {
            if(e.button !== 0) return
            e = e || window.event;
            e.preventDefault();
            const {clientX} = e;
            offsetX = clientX - element.offsetLeft - get_int_style('width');
            document.addEventListener('mouseup', AIcloseDragElement)
            document.addEventListener('mousemove', AIelementDrag)
          }
        
          function AIelementDrag(e) {
                const {clientX} = e;
                let x = clientX - element.offsetLeft - offsetX
                if(x < minW) x = minW;
                element.style.width =  x + 'px';
          }
        
          function AIcloseDragElement() {
            document.removeEventListener("mouseup", AIcloseDragElement);  
            document.removeEventListener("mousemove", AIelementDrag);
          }
        return AIdragMouseDown
    }

    function resizeYPositive()
    {
        let offsetY
        function AIdragMouseDown(e) {
            if(e.button !== 0) return
            e = e || window.event;
            e.preventDefault();
            const {clientY} = e;
            offsetY = clientY - element.offsetTop - get_int_style('height');
    
            document.addEventListener('mouseup',AIcloseDragElement)
            document.addEventListener('mousemove',AIelementDrag)
          }
        
          function AIelementDrag(e) {
                const {clientY} = e;
                let y =  clientY - element.offsetTop - offsetY;
                if(y < minH) y = minH;
                element.style.height = y + 'px';
          }
        
          function AIcloseDragElement() {
            document.removeEventListener("mouseup", AIcloseDragElement);  
            document.removeEventListener("mousemove", AIelementDrag);
          }
        return AIdragMouseDown
    }

    function resizeXNegative()
    {
        let offsetX
        let startX
        let startW
        let maxX
        function AIdragMouseDown(e) {
            if(e.button !== 0) return
            e = e || window.event;
            e.preventDefault();
            const {clientX} = e;
            startX = get_int_style('left')
            startW = get_int_style('width')
            offsetX = clientX - startX;
            maxX = startX + startW - minW
    
            document.addEventListener('mouseup',AIcloseDragElement)
            document.addEventListener('mousemove',AIelementDrag)
          }
        
          function AIelementDrag(e) {
                const {clientX} = e;
                let x = clientX - offsetX
                let w = startW + startX - x
                if(w < minW) w = minW;
                if(x > maxX) x = maxX;
                element.style.left = x + 'px';
                element.style.width = w + 'px';
          }
        
          function AIcloseDragElement() {
            document.removeEventListener("mouseup", AIcloseDragElement);  
            document.removeEventListener("mousemove", AIelementDrag);
          }
        return AIdragMouseDown
    }

    function resizeYNegative()
    {
        let offsetY
        let startY
        let startH
        let maxY
        function AIdragMouseDown(e) {
            if(e.button !== 0) return
            e = e || window.event;
            e.preventDefault();
            const {clientY} = e;
            startY = get_int_style('top')
            startH = get_int_style('height')
            offsetY = clientY - startY;
            maxY = startY + startH - minH 
    
            document.addEventListener('mouseup',AIcloseDragElement,false)
            document.addEventListener('mousemove',AIelementDrag,false)
          }
        
          function AIelementDrag(e) {
                const {clientY} = e;
                let y =  clientY - offsetY
                let h = startH + startY - y
                if(h < minH) h = minH;
                if(y > maxY) y = maxY;
                element.style.top = y + 'px';
                element.style.height = h + 'px';
          }
        
          function AIcloseDragElement() {
            document.removeEventListener("mouseup", AIcloseDragElement);  
            document.removeEventListener("mousemove", AIelementDrag);
          }
        return AIdragMouseDown
    }
}
// https://stackoverflow.com/questions/8960193/how-to-make-html-element-resizable-using-pure-javascript
  



// start drag https://www.w3schools.com/howto/howto_js_draggable.asp
function make_AI_draggable() { 
  consolecont_ai_ner=document.getElementById("cont_ai_ner");
    var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
//  if (document.getElementById(consolecont_ai_ner.id + "Heaven"))
//  if present, the Heaven is where you move the DIV from:
//     document.getElementById(consolecont_ai_ner.id + "Heaven").onmousedown = AIdragMouseDown;
//   } else {
//   otherwise, move the DIV from anywhere inside the DIV:
    document.getElementById("Heaven").onmousedown = consoleAIdragMouseDown;
   
 

  function consoleAIdragMouseDown(e) {
    e = e || window.event;
    e.preventDefault();
    // get the mouse cursor position at startup:
    pos3 = e.clientX;
    pos4 = e.clientY;
    document.onmouseup = closeaiconsoledrag;
    // call a function whenever the cursor moves:
    document.onmousemove = aiconsoledrag;
  }

  function aiconsoledrag(e) {
    e = e || window.event;
    e.preventDefault();
    // calculate the new cursor position:
    pos1 = pos3 - e.clientX;
    pos2 = pos4 - e.clientY;
    pos3 = e.clientX;
    pos4 = e.clientY;
    //console.log("pos2 ",pos2);
    if (consolecont_ai_ner.offsetTop - pos2 >=30 ){
         // set the element's new position:
         consolecont_ai_ner.style.top = (consolecont_ai_ner.offsetTop - pos2) + "px";
    }
    consolecont_ai_ner.style.left = (consolecont_ai_ner.offsetLeft - pos1) + "px";
  }

  function closeaiconsoledrag() {
    /* stop moving when mouse button is released:*/
    document.onmouseup = null;
    document.onmousemove = null;
  }
}
// end drag https://www.w3schools.com/howto/howto_js_draggable.asp


 </script>


<!---->















  <div class="cont_ai_ner" id="cont_ai_ner" >
     	<div class="floating-div">
<button class="up-button" onclick="scrollToTop();" title="Scroll UP"><font style="font-size:18px;transform: rotate(90deg);float:left;"><</font></button>
<button class="down-button" onclick="scrollToBottom();" title="Scroll Down"><font style="font-size:18px;transform: rotate(90deg);float:left;">></font></button>
</div>

      <div class="Heaven" id="Heaven" title="You Can Drag Me & Resize on Corners and Borders" ondblclick="MaximizeAI()">
      <!--https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover-->
      <div class="dropdown"style="position: absolute;" >
        <button class="dropbtn" style="margin:3px;">Menu</button>
          <div class="dropdown-content">
           
            <a href="https://platform.openai.com/signup" target="_blank" title='Get Started &#013;SignUp for OpenAI Chat-GPT&#013;&#013;if you have a key&#013;enter it in the main window&#013; &#013;API_KEY label expands with an input field&#013;&#013;Paste your key in the input field&#013;&#013;would you give me feedback?&#013;is my info//guide/description right&#013;This is also new for me!'>
            <button class="dropbt" style="border:none;color:greenyellow" onmouseover="this.focus()" onmouseout="this.blur()">Get Started OpenAI Signup</button></a>
            
            <a href="https://platform.openai.com/account/api-keys" target="_blank" title="Get an API_KEY&#013;&#013;if you have a key&#013;enter it in the main window&#013;&#013;API_KEY label expands with an input field&#013;&#013;Paste your key in the input field&#013;&#013;would you give me feedback?&#013;is my info//guide/description right&#013;This is also new for me"><button class="dropbt" style="border:none;color:greenyellow" onmouseover="this.focus()" onmouseout="this.blur()">Get an API_KEY</button></a>
         
            <button onclick='openNewWindow("https://chat.openai.com","chat")' value="Chat-GPT WebPage" title="Chat-GPT WebPage" class="dropbt" style="border:none;color:greenyellow;" onmouseover="this.focus()" onmouseout="this.blur()">Chat-GPT WebPage</button>
           <br><br>
            <button onclick='openNewWindow("https://blackbox.ai","blackbox")' value="BLACKBOX.AI WebPage" title="BLACKBOX.AI WebPage" class="dropbt" style="border:none;color:greenyellow;" onmouseover="this.focus()" onmouseout="this.blur()">BLACKBOX.AI WebPage</button>
            
            <a href="https://platform.openai.com/docs/models" target="_blank" title=""><button class="dropbt" style="border:none;" onmouseover="this.focus()" onmouseout="this.blur()">AI models info</button></a>
            
            <!--
            <a href="https://platform.openai.com/usage" target="_blank" title="Traffic Tokens Usage"><button class="dropbt" style="border:none;" onmouseover="this.focus()" onmouseout="this.blur()">AI Usage Info</button></a>
            -->
            <button onclick='openNewWindow("https://platform.openai.com/usage","Usage")' value="Chat-GPT WebPage" title="Traffic Cost, Tokens, Usage" class="dropbt" style="border:none;color:greenyellow;" onmouseover="this.focus()" onmouseout="this.blur()">AI Usage Info</button><br>
            <br>
          
<button onclick='openNewWindow("https://getsby.com/en/creator-platform/pay-for-chatgpt-and-openai-with-a-virtual-mastercard-card/","NoCredit")' value="NoCredit" title="I have No Credit Card&#010Maybe this can help&#010;I wil try it later&#010;&#010;hmmm, *Payment for OpenAI API is temporarily unavailable.&#010;&#010;or let me know if this works?" class="dropbt" style="border:none;color:greenyellow;" onmouseover="this.focus()" onmouseout="this.blur()">No Credit (Card)?</button><br>
            <br>


            <button onclick='openNewWindow("https://status.openai.com/")' value="Chat-GPT WebPage" title="OpenAI Server Status&#013;&#013;Has some downtime&#013;&#013;&#013;would loke to have a status image" class="dropbt" style="border:none;color:greenyellow;" onmouseover="this.focus()" onmouseout="this.blur()">OpenAI API Server Status</button></button>
          
            <a href="https://github.com/ldijkman/Ace_Seventh_Heaven/discussions/6" target="_blank" title=""><button class="dropbt" style="border:none;" onmouseover="this.focus()" onmouseout="this.blur()">Comments, Suggestions, Feedback</button></a>
           
            <a href="https://ldijkman.github.io/Ace_Seventh_Heaven/Hell.html" target="_blank" title="Heaven or Hell"><button class="dropbt" style="border:none;" onmouseover="this.focus()" onmouseout="this.blur()">Heaven or Hell</button></a>
           
            <button class="dropbt" onclick="MaximizeAI();"style="border:none;">FullScreen</button><br>
<br>
 <button onclick='openNewWindow("https://community.openai.com/c/api/7")' value="OpenAI API Forum" title="OpenAI API Forum &#010;A Place Where The Moderators Kill My Messages!&#010;&#010;How the moderators act is awfull!&#010;&#010;Try it yourself?" class="dropbt" style="border:none;color:greenyellow;" onmouseover="this.focus()" onmouseout="this.blur()">4 Nerds: OpenAI API Forum</button><br>
            <br>
            
            
          </div>
       </div>	
       <!--https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_hover--> 
        <script>
            function openNewWindow(what,target) {
              if(target==""){target="_blank";} // do not know, o want chat to open in same target, but wil not do, usage does
              // possible solution  https://github.com/ldijkman/Ace_Seventh_Heaven/discussions/6#discussioncomment-7604875
              console.debug("window.open target",target);
              var screenWidth = screen.width;
              var screenHeight = screen.height;              
               console.log("screensize ", screenWidth,"  ",screenHeight);
               // center window on screen, window.open does not qaccept % or vw
                 window.open(what, target, 'width=600, height=400,left='+(screenWidth-600)/2+', top='+(screenHeight-400)/2);
           }
        </script>
        <center>
      	A.I. Code Assistant<!-- Ace Editor with AI / Ace Editor with AI -->
          <button onclick="toggleVisibility('cont_ai_ner')" style="float:right;margin:3px;margin-right:5px;" title="Close Window"> X </button>
          <a href="https://github.com/ldijkman/Ace_Seventh_Heaven/discussions/6" target="_blank" style="float:right;margin:3px;" title="Hellup"><button>?</button></a>
          <button onclick="MaximizeAI()" style="float:right;margin:3px;margin-right:5px;" title="Maximize AI Window to fullscreen"> + </button>
         <button onclick="normalsize()" style="float:right;margin:3px;margin-right:5px;" title="normalsize AI Window"> - </button>
        
         </center>
      </div>
      <div class="AfterWorld"  id="AfterWorld" title="The AfterWorld">
 
      	
      	    <div style="border :1px solid white;margin:10px;padding:10px;" title="Enter an Openai API_KEY">
              <center> 
                    <label class="label" style="color:yellow;" onmouseover="expandInput()" onmouseout="shrinkInput()" title="Get an OpenAI Api_Key Here!" ><a href="https://platform.openai.com/account/api-keys" target="Heaven" style="color:gray;">API_KEY</a> : </label>
                    <input type="text" class="input" id="apikey" placeholder="Type or Paste APi_KEY here..." title="Type or Paste APi_KEY here..." onmouseover="expandInput()" onmouseout="shrinkInput()">
                    <br>
                    <!-- https://platform.openai.com/docs/models -->
                    <select name="model" id="model" title="Select an AI model">
                        <option value="gpt-3.5-turbo-1106" title="For me the Fastest and 16k" style="color:green;">gpt-3.5-turbo-1106  16k</option>
                        <option value="gpt-3.5-turbo" title="Slow for Me? Bussy? and 4k" style="color:green;">gpt-3.5-turbo 4k</option>
                        <option value="gpt-3.5-turbo-16k" title="Dont know 16k">gpt-3.5-turbo-16k</option>
                         <option value="gpt-3.5-turbo-0301k" title="Dont know 16k">gpt-3.5-turbo-0301k</option>
                       
                        <option value="code-davinci-002" title="Dont know" style="color:red;">code-davinci-002</option>
                        <option value="gpt-4-1106-preview" title="Dont know" style="color:red;">gpt-4-1106-preview</option>
                        <option value="gpt-4" title="Dont know" style="color:red;">gpt-4</option>
                    
                   
                    </select>
                    <!-- https://platform.openai.com/docs/models -->
                         
                   <button onclick='resultText.innerText="";' Title="WARNING!!!: Clear Chat Area/History">Clear Chat</button>
                     <button id="removeKeyButton" title="Erase API_KEY from Browsers LocalStorage">Erase API Key</button>

  <script>
// Function to remove the API key from local storage
function removeApiKey() {
var result = confirm("Are you sure you want to erase the API Key from local storage?");
if (result) {
localStorage.removeItem("apiKey");
alert("API Key has been removed from local storage.");
apikey.value = "Erased By Owner";
}
}

    // Add an event listener to the button to trigger the removal of the API key
    document.getElementById("removeKeyButton").addEventListener("click", removeApiKey);
  </script>
   
    <script> 
        function expandInput() {
            var container = document.querySelector('.input');
            container.style.width = '200px';
        }

        function shrinkInput() {
            var container = document.querySelector('.input');
            container.style.width = '0'; 
        }
        shrinkInput();
    </script>
              </center>
            </div>

<div>   <!--Streaming OpenAI API Completions in JavaScript-->
<!--
      <center>
      <h3 class=""> 
       OpenAI Code Assistant
      </h3>
      </center>
-->
      <div id="resultcont_ai_ner" class="" style="border :1px solid gray;margin:10px;padding:10px;">
        <!--<p class="">Generated Text</p>-->
        <p id="resultText" class="" title="Chat Content" >
Privacy Policy:<br>
i hereby Swear that i do NOT collect data or Steal Keys from anyone.<br>
The API_Key is stored in Your Browser LocalStorage, for your Convenience.<br>
You can Erase API_KEY with the Erase Button.<br>
A.I. is an amazing impressive tool for code help.<br>
i am just a hobbyist, trying to make an Editor.<br>
Happy Coding, Greet, Dirk Luberth Dijkman!.<br>
<br>
playing a bit with markdown to html chat message <br>
maybe a problem with html code without tripple backticks <br>
<a href="javascript:void(0);" onclick='setTextInInput("html draw a lemniscate, and animate the drawing continu,change color each time, leave the previous drawn be overwrtitten by new color, include text to html, infinity forever and thats a mighty long time");generate();' style="color:red;">Example: ask: html draw a lemniscaat, and animate the drawing continu,change color each time, leave the previous drawn be overwrtitten by new color, include text to html, forever and that's a mighty long time</a><br>
<br>
<a href="javascript:void(0);" onclick='setTextInInput("html countdown to newyear 2024");generate();' style="color:red;">Example: ask: html countdown to newyear 2024</a><br>
<br>
<a href="javascript:void(0);" onclick='setTextInInput("create html webpage with clock")' style="color:red;">Example that goes wrong: ask: create html webpage with clock</a><br>
<br>
<a href="javascript:void(0);" onclick='setTextInInput("javascript for loop examples")' style="color:red;">Example that is ok: ask: javascript for loop examples</a><br>

<script>
  function setTextInInput(what) {
    var inputField = document.getElementById('promptInput');
    // Set the desired text in the input field
    inputField.value = what;
  }
</script>

<br><br>
Tip!<br>
if you have a question about sourcecode you have<br>
paste the sourcecode together with the question<br>
in 1 message<br>
<br>
Chat-GPT sends previous messages with the question<br>
i do not, saves data<br>

</p>
     
      </div>

      <center>
        <!--
      Question: <input type="text" id="promptInput"  styleplaceholder="Question Me..." title="Type or Paste your Question here...&#013;&#013;Looks like a little input field&#013;But it Handles more input as Google Bard"/>
     Question: <input type="text" id="promptInput" size="40" placeholder="Type or Paste your Question here..." title="Looks like a little input field, but it handles more input like Google Bard" />  
     Ask: <textarea id="promptInput" tabindex="0" data-id="root" rows="1" cols="40" placeholder="Ask Chat-GPT OpenAi API" class="m-0 w-full resize-none border-0 bg-transparent py-[10px] pr-10 focus:ring-0 focus-visible:ring-0 dark:bg-transparent md:py-4 md:pr-12 gizmo:md:py-3.5 gizmo:placeholder-black/50 gizmo:dark:placeholder-white/50 pl-3 md:pl-4" style="max-height: 200px; height: 44px; overflow-y: auto;"></textarea>
     Ask:  <textarea id="promptInput" cols="40" placeholder="Ask Chat-GPT OpenAi API" style="resize: none; overflow-y: scroll; height: 1.2em; min-height: 1.2em; max-height: calc(5 * 1.2em);" oninput="this.style.height = 'auto'; this.style.height = (this.scrollHeight + 2) + 'px'"></textarea>
       -->
       <div id="BrainPain" title="server errors"><small>BrainPain Status</small></div>
       <!--
          <button onclick='openNewWindow("https://platform.openai.com/usage","Usage")' value="Chat-GPT WebPage" title="Traffic Cost, Tokens, Usage" class="dropbt" style="border:none;color:greenyellow;" onmouseover="this.focus()" onmouseout="this.blur()">?</button><br>
       -->    
   Ask:  <textarea id="promptInput" cols="40" placeholder="Ask Chat-GPT OpenAi API" style="resize: both; overflow-y: auto; height: 1.2em; min-height: 1.2em; max-height: calc(5 * 1.2em);" oninput="this.style.height = 'auto'; this.style.height = (this.scrollHeight + 2) + 'px'"></textarea>
    
      <div class=""><div id="spinner"></div>
        <br>
        <button id="generateBtn" class="" title="Submit Question">Generate</button>
        <button id="stopBtn" disabled class="" Title="Guess">Stop</button><br>
        <br>
        <input type="checkbox" id="myCheckbox" checked>
        <label for="myCheckbox" title="Parse MarkDown to HTML when stream done&#010;&#010;https://github.com/markedjs/marked">MarkDown to HTML</label>
        

 




        </center>
      </div>
     <center>
     <br>
     <a href="https://ldijkman.github.io/Ace_Seventh_Heaven/Hell.html" target="_blank">Heaven or Hell, That is the Question.</a><br>
     <a href="https://ldijkman.github.io/Ace_Seventh_Heaven/The_AfterWorld.html" target="_blank" title="Ace Editor with AI.">The AfterWorld.</a><br>
   
     </center>
    </div>
      	
      	
      
      <div class="Hell" title="&copy; Dirk Luberth Dijkman Bangert 30 Andijk The Netherlands">
        <center>
          <font style="font-size:10px;">
                &copy; Dirk Luberth Dijkman Bangert 30 Andijk The Netherlands
          </font>
          <button onclick="scrollToTop()"  style="float:right;" title="Scroll to Top"><font style="transform: rotate(90deg);float:left;"><</font></button>
          <button onclick="scrollToBottom()"  style="float:right;" title="Scroll to Bottom"><font style="transform: rotate(90deg);float:left;">></font></button>
        
        </center>
        
      </div>
    </div>

   
<!-- 
Copyright, Free to use if this/next message is left in the code   
    original source https://github.com/gopinav/ai 
  this: 
     OpenAI Stream Chat, HTML WebPage
       https://plnkr.co/edit/KmmUTa3FNTQ6WLa7
       https://codepen.io/ldijkman/pen/gOqWwxw?editors=1010
       https://ldijkman.github.io/Ace_Seventh_Heaven/OpenAI_Stream_Chat.html
             https://github.com/ldijkman/Ace_Seventh_Heaven/tree/main/docs
       https://www.facebook.com/luberth.dijkman/
Copyright, Free to use if this/above message is left in the code           
-->
    <!--
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js"></script>
-->
 <script>

setInterval(function(){ 
  var brainpain = new StatusPage.page({ page : 'jbxzcdv9xc4d' });
  brainpain.status({
    success : function(data) {
      console.warn("server errors: ",data.status.indicator," == ",data.status.description);
      BrainPain.style.color="green";
      if(data.status.indicator!="none"){BrainPain.style.color="red";}
      BrainPain.innerHTML="<small>Brain Pain: "+data.status.indicator+" == "+data.status.description+"</small>";
    }
  });
},60000);


/*
<!-- 
Copyright, Free to use if this/next message is left in the code   
    original source https://github.com/gopinav/ai 
  this: 
     OpenAI Stream Chat, HTML WebPage
       https://plnkr.co/edit/KmmUTa3FNTQ6WLa7
       https://codepen.io/ldijkman/pen/gOqWwxw?editors=1010
       https://ldijkman.github.io/Ace_Seventh_Heaven/OpenAI_Stream_Chat.html
             https://github.com/ldijkman/Ace_Seventh_Heaven/tree/main/docs
       https://www.facebook.com/luberth.dijkman/
Copyright, Free to use if this/above message is left in the code   
-->
*/
// Add your code here
/**
 * This code demonstrates how to use the OpenAI API to generate chat completions.
 * The generated completions are received as a stream of data from the API 
 * and the
 * code includes functionality to handle errors and abort requests using an AbortController.
 * The API_KEY variable needs to be updated 
 * with the appropriate value from OpenAI for successful API communication.
 */

 

const API_URL = "https://api.openai.com/v1/chat/completions";

var start=0;
 var apiKey;
  // Check if there is an API key in local storage on page load
  // console.log("aks",localStorage.getItem("apiKey"));
  const storedApiKey = localStorage.getItem("apiKey");
  if (storedApiKey) {
    document.querySelector("#apikey").value = storedApiKey;
    setTimeout(function(){console.warn("Wow!,You have been here before, Welcome Back!");
    },500);
  } 
var API_KEY = document.querySelector("#apikey").value;

const promptInput = document.getElementById("promptInput");
const generateBtn = document.getElementById("generateBtn");
const stopBtn = document.getElementById("stopBtn");
const resultText = document.getElementById("resultText");

    // Add an event listener to the input element for the "input" event.
    document.getElementById("apikey").addEventListener("input", function(event) {
      // This function will be called whenever the user types in the input field.
      API_KEY = document.getElementById("apikey").value;
      console.debug("API_KEY ", API_KEY)
    });

   


let controller = null; // Store the AbortController instance

const generate = async () => {


  const spinner = document.getElementById("spinner");
  spinner.style.display = "block";
  
  if (!promptInput.value) {
    // alert("Please enter a prompt.");        // Alert is annoying change it         the user if no prompt value
    resultText.innerHTML += "<br><font style=\"color:red;\"><b>ERROR: </b>Enter a Question in input text field</font><br>";
    promptInput.value= "a prayer for my foolishness";

    generate();
    return;
  }

  // https://status.openai.com/api/v2
  // https://status.openai.com/api/v2/status.json
  // <script type="text/javascript" src="https://cdn.statuspage.io/se-v2.js"><\/script>
  // <div id="BrainPain" title="server errors"></div>
  var sp = new StatusPage.page({ page : 'jbxzcdv9xc4d' });
  sp.status({
    success : function(data) {
      console.warn("server errors: ",data.status.indicator," == ",data.status.description);
      BrainPain.style.color="green";
      if(data.status.indicator!="none"){BrainPain.style.color="red";}
      BrainPain.innerHTML="<small>Brain Pain: "+data.status.indicator+" == "+data.status.description+"</small>";
    }
  });

  // https://status.openai.com/api/v2/status.json
  // https://status.openai.com/api/v2



  console.debug("ask tokens ",promptInput.value.length);
var asked = promptInput.value+"\n\n";
  // Disable the generate button and enable the stop button
  generateBtn.disabled = true;
  stopBtn.disabled = false;
  resultText.innerText += "\n\n";

  // Create a new AbortController instance
  controller = new AbortController();
  const signal = controller.signal;

              // Get the dropdown element
            var dropdown = document.getElementById("model");

            // Get the selected value
            var aiGPT_Model = dropdown.options[dropdown.selectedIndex].value;

            // Log or use the selected value
            console.log("aiGPT_Model:", aiGPT_Model);


  try {
    // Fetch the response from the OpenAI API with the signal from AbortController
    const response = await fetch(API_URL, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${API_KEY}`,
      },
      body: JSON.stringify({
        model: aiGPT_Model,
        messages: [{ role: "user", content: promptInput.value }],
        max_tokens: 4000,     // think 4000 chars for response leaves 96 for ask
        stream: true,         // For streaming responses
      }),
      signal,                 // Pass the signal to the fetch request
    });
    // Stream OpenAI Chat Completions Like ChatGPT in JavaScript
    // https://youtu.be/wDtjBb4ZJwA?si=3JBIZTcTEDgWjaiB
    // https://www.builder.io/blog/stream-ai-javascript

    // Read the response as a stream of data
    const reader = response.body.getReader();
    const decoder = new TextDecoder("utf-8");
    //resultText.innerText = "";  //  i do not want to clear on each new question

    // Whe are trough, a valid key, Store the API key in your Browser local storage
    localStorage.setItem("apiKey", document.getElementById("apikey").value);
    //console.log("ak",localStorage.getItem("apiKey"));
    var str=localStorage.getItem("apiKey");
    console.log("API_KEY ",str.slice(0,4), " ** screenshot protection ** "  , str.slice(-4));// only show first 5 and last 5 chars
    document.getElementById("apikey").style.color="green";



 


resultText.innerHTML+='<div class="answer">';
console.time();
var message="asked: "+asked;
    // Stream OpenAI Chat Completions Like ChatGPT in JavaScript
    // https://youtu.be/wDtjBb4ZJwA?si=3JBIZTcTEDgWjaiB
    // https://www.builder.io/blog/stream-ai-javascript
    while (true) {
      const { done, value } = await reader.read();
      if (done) {
        console.debug("done",done);
        break;
      }
      // Massage and parse the chunk of data
      const chunk = decoder.decode(value);
    //  console.debug("chunk",chunk);
    //  data: {"id":"chatcmpl-8NCypeVBmYNc77kqmx5BnzBXjm024","object":"chat.completion.chunk","created":1700542131,"model":"gpt-3.5-turbo-1106","system_fingerprint":"fp_eeff13170a","choices":[{"index":0,"delta":{"content":" today"},"finish_reason":null}]} 
    //  data: {"id":"chatcmpl-8NCypeVBmYNc77kqmx5BnzBXjm024","object":"chat.completion.chunk","created":1700542131,"model":"gpt-3.5-turbo-1106","system_fingerprint":"fp_eeff13170a","choices":[{"index":0,"delta":{"content":"?"},"finish_reason":null}]} 
    //  data: {"id":"chatcmpl-8NCypeVBmYNc77kqmx5BnzBXjm024","object":"chat.completion.chunk","created":1700542131,"model":"gpt-3.5-turbo-1106","system_fingerprint":"fp_eeff13170a","choices":[{"index":0,"delta":{},"finish_reason":"stop"}]} data: [DONE]


//test
// Parse the JSON string into an object
/////var mdataObject = JSON.parse(chunk);
// Access the content within the 'choices' array
/////var mcontent = mdataObject.choices[0].delta.content;
// Output the content
//////console.log("test",mcontent); // This will log " today" to the console
//test




      const lines = chunk.split("\n");  // split
      //console.debug("lines",lines);
      const parsedLines = lines
        .map((line) => line.replace(/^data: /, "").trim()) // Remove the "data: " prefix
        .filter((line) => line !== "" && line !== "[DONE]") // Remove empty lines and "[DONE]"
        .map((line) => JSON.parse(line)); // Parse the JSON string
        console.debug("parsedLines",parsedLines);
        // {"id":"chatcmpl-8ND55ADaPwEokMeXTanr0yXJpxWTC","object":"chat.completion.chunk","created":1700542519,"model":"gpt-3.5-turbo-1106","system_fingerprint":"fp_eeff13170a","choices":[{"index":0,"delta":{"content":" today"},"finish_reason":null}]},
        // {"id":"chatcmpl-8ND55ADaPwEokMeXTanr0yXJpxWTC","object":"chat.completion.chunk","created":1700542519,"model":"gpt-3.5-turbo-1106","system_fingerprint":"fp_eeff13170a","choices":[{"index":0,"delta":{"content":"?"},"finish_reason":null}]},
        // {"id":"chatcmpl-8ND55ADaPwEokMeXTanr0yXJpxWTC","object":"chat.completion.chunk","created":1700542519,"model":"gpt-3.5-turbo-1106","system_fingerprint":"fp_eeff13170a","choices":[{"index":0,"delta":{},"finish_reason":"stop"}]}]
     
      for (const parsedLine of parsedLines) {
        const { choices } = parsedLine;
       // console.debug("parsedLine",parsedLine );
        const { delta } = choices[0];
        const { content } = delta;
        const { finish_reason } = choices[0];
         console.debug("result ",delta,"---",content,"---",finish_reason);
          // DEBUG: result {} --- --- stop
          // DEBUG: result {"content":"?"} --- ? --- null
          // DEBUG: result {"content":" today"} --- today --- null
// or UMD script

if(finish_reason=="stop"){
 // message+="\n\nEnd";
//resultText.innerHTML=message;

resultText.innerHTML+='<center><input type="button" value="paste at cursor" onclick="var messag=resultText.innerText;editor.getSession().insert(editor.getCursorPosition(), messag);"></center>';

}
        // Update the UI with the new content
        if (content) {

         console.info("Blah ",content); // https://youtu.be/mfJhMfOPWdE

          message+=content;
          // Output the formatted Markdown
          formatHTMLForMarkdown(message);  
          //resultText.innerHTML=marked.parse(message);
resultText.innerHTML=marked.parse((formatHTMLForMarkdown(message)));
      

           
          scrollAfterWorldToBottom(); // Scroll to the bottom after generating a message

        }
      }
    }
console.timeEnd();
console.log(resultText.innerText);
resultText.innerHTML+='</div>';



if (document.getElementById('myCheckbox').checked) {
    //resultText.innerHTML = marked.parse(resultText.innerText);
} else {
 //
}


// Add an event listener for the "change" event
document.getElementById('myCheckbox').addEventListener("change", function(event) {
// Check if the checkbox is checked
if (myCheckbox.checked) {
      console.log("MD to HTML Checkbox is checked");
      resultText.innerHTML = asked+ marked.parse(message);
} else {
      console.log("MD to HTML Checkbox is unchecked");
      // Do something when the checkbox is unchecked
      resultText.innerText= asked+message;
}
});



//<input type="checkbox" id="myCheckbox" onchange="updateStatus()">
//<label for="myCheckbox">Mark as read</label>

 
   

//////////////////////////////////////////////////////////////////
/*
setTimeout(function(){
  // Function to copy code content
    function copyCode(index) {
      const codeBlocks = document.querySelectorAll('code.language-javascript');
      const codeBlock = codeBlocks[index];
      const codeContent = codeBlock.textContent;

      // Create a textarea element to copy the code
      const textarea = document.createElement('textarea');
      textarea.value = codeContent;

      // Append the textarea to the body
      document.body.appendChild(textarea);

      // Select and copy the text
      textarea.select();
      document.execCommand('copy');

      // Remove the textarea
      document.body.removeChild(textarea);

      alert('Code copied to clipboard!');
    }

    // Function to add copy buttons
    function addCopyButtons() {
      const codeBlocks = document.querySelectorAll('code.language-javascript');

      codeBlocks.forEach((codeBlock, index) => {
        // Create a copy button
        const copyButton = document.createElement('button');
        copyButton.textContent = 'Copy';
        copyButton.addEventListener('click', () => copyCode(index));

        // Append the copy button before the code block
        codeBlock.parentNode.insertBefore(copyButton, codeBlock);
      });
    }

    // Call the function to add copy buttons when the DOM is loaded
    document.addEventListener('DOMContentLoaded', addCopyButtons);
},1500);
*/
//////////////////////////////////////////////////////////////////////



//resultText.innerHTML=resultText.innerText;
/*
let inputString = resultText.innerHTML;
// not what i want but code is now in a texarea created if message is complete
let count = 0;
let replacedString = inputString.replace(/(\r\n|\r|\n)/g, '<br>');
    replacedString = inputString.replace(/```/g, function(match) {
  count++;
  return count % 2 === 0 ? '</textarea><br>' : '<br><textarea class="autoExpand" style="height:auto;">'; 
});
console.log(replacedString);
resultText.innerHTML=replacedString;
*/



//  this.style.height = 'auto';
 // this.style.height = (this.scrollHeight) + 'px';


console.debug("message tokens? ",message.length);
console.debug("message ",message);
console.debug("message tokens? ",message.length);

  promptInput.value="";  // clear ask field
 
  } catch (error) {
    // Handle fetch request errors
    if (signal.aborted) {
      resultText.innerText += "\nRequest aborted.\n";
    } else {
      console.error("Error:", error);
      resultText.innerHTML += "<br><font style=\"color:red;\">Error, is your API_KEY valid ?</font><br>";
      console.error("Error, is your API_KEY valid ?");
      document.getElementById("apikey").style.color="red";
     
    }
  } finally {
    // Enable the generate button and disable the stop button
    generateBtn.disabled = false;
    stopBtn.disabled = true;
    controller = null; // Reset the AbortController instance
  }
   spinner.style.display = "none";
};

const stop = () => {
  // Abort the fetch request by calling abort() on the AbortController instance
  if (controller) {
    controller.abort();
    controller = null;
  }
};

promptInput.addEventListener("keyup", (event) => {
  if (event.key === "Enter") {
    resultText.innerText +="\n---------------\nYou: "+ promptInput.value+"";
    generate();
  }
});

generateBtn.addEventListener("click", (event)=>{
  if(start==0){ resultText.innerText = "";start=1;}
  resultText.innerText +="\n---------------\nYou: "+ promptInput.value+"";
  generate();
});

stopBtn.addEventListener("click", stop);


function formatHTMLForMarkdown(htmlString) {
  // Regular expression to detect HTML tags
  const htmlTagRegex = /<("[^"]*"|'[^']*'|[^'">])*>/;
  // Check if the string contains HTML
  if (htmlTagRegex.test(htmlString)) {
    // If it contains HTML, wrap it with triple backticks for Markdown code block
    return `\`\`\`html\n${htmlString}\n\`\`\``;
  } else {
    // If not, return the original string
    return htmlString;
  }
}





// Function to scroll the AfterWorld div to the bottom
function scrollAfterWorldToBottom() {
    console.debug("scrollAfterWorldToBottom()");
  var AfterWorld = document.getElementById("AfterWorld");
  AfterWorld.scrollTop = AfterWorld.scrollHeight;
}

  function scrollToTop() {
    console.debug("scrollToTop()");
    AfterWorld.scrollTo({
      top: 0,
      behavior: "smooth"
    });
  }

  function scrollToBottom() {
    console.debug("scrollToBottom()");
    AfterWorld.scrollTo({
    top: document.getElementById("AfterWorld").scrollHeight,
    behavior: "smooth"
  });
  }



  function MaximizeAI() {
    var wi =  document.getElementById("cont_ai_ner").style.width;
    var he =  document.getElementById("cont_ai_ner").style.height;


    if(wi == '100%' & he == '100%'){
      console.debug("MaximizeAI() bottom");
      document.getElementById("cont_ai_ner").style.width = '100%';
      document.getElementById("cont_ai_ner").style.height = '35%';
      document.getElementById("cont_ai_ner").style.left = '0';
      document.getElementById("cont_ai_ner").style.top = '65%';
      return;
    }
    if(wi == '100%'){
      normalsize();
      console.debug("MaximizeAI() going to normalsize()");
      return;
    }
      console.debug("MaximizeAI()");
      document.getElementById("cont_ai_ner").style.width = '100%';
      document.getElementById("cont_ai_ner").style.height = '100%';
      document.getElementById("cont_ai_ner").style.left = '0';
      document.getElementById("cont_ai_ner").style.top = '0';
  }

    function normalsize() {
      console.debug("normalsize()");
      document.getElementById("cont_ai_ner").style.width = '40%';
      document.getElementById("cont_ai_ner").style.height = '80%';
      document.getElementById("cont_ai_ner").style.left = '30%';
      document.getElementById("cont_ai_ner").style.top = '10%';
  }



  function toggleFullscreen() {
    const elem = document.documentElement;

    if (!document.fullscreenElement) {
      if (elem.requestFullscreen) {
        elem.requestFullscreen();
      } else if (elem.mozRequestFullScreen) { /* Firefox */
        elem.mozRequestFullScreen();
      } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
        elem.webkitRequestFullscreen();
      } else if (elem.msRequestFullscreen) { /* IE/Edge */
        elem.msRequestFullscreen();
      }
    } else {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.mozCancelFullScreen) { /* Firefox */
        document.mozCancelFullScreen();
      } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) { /* IE/Edge */
        document.msExitFullscreen();
      }
    }
  }

/*
<!-- 
Copyright, Free to use if this/next message is left in the code   
    original source https://github.com/gopinav/ai 
  this: 
     OpenAI Stream Chat, HTML WebPage
       https://plnkr.co/edit/KmmUTa3FNTQ6WLa7
       https://codepen.io/ldijkman/pen/gOqWwxw?editors=1010
       https://ldijkman.github.io/Ace_Seventh_Heaven/OpenAI_Stream_Chat.html
             https://github.com/ldijkman/Ace_Seventh_Heaven/tree/main/docs
       https://www.facebook.com/luberth.dijkman/
Copyright, Free to use if this/above message is left in the code   
-->
*/


</script>






    
    
<!-- 
Copyright, Free to use if this/next message is left in the code   
    original source https://github.com/gopinav/ai 
  this: 
     OpenAI Stream Chat, HTML WebPage
       https://plnkr.co/edit/KmmUTa3FNTQ6WLa7
       https://codepen.io/ldijkman/pen/gOqWwxw?editors=1010
       https://ldijkman.github.io/Ace_Seventh_Heaven/OpenAI_Stream_Chat.html
             https://github.com/ldijkman/Ace_Seventh_Heaven/tree/main/docs
       https://www.facebook.com/luberth.dijkman/
Copyright, Free to use if this/above message is left in the code           
-->        
    <script>
        function toggleVisibility(what) {
            var myDiv = document.getElementById(what);

            // Toggle the visibility
            if (myDiv.style.display === "none") {
                myDiv.style.display = "block";
                 console.warn('run in console => toggleVisibility("'+what+'");');
            } else {
                myDiv.style.display = "none";
                console.warn('run in console => toggleVisibility("'+what+'");');
            }
        }
    </script>
                                  
</body>

</html>
